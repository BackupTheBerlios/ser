Binary files kphone-3.11/.configure.in.swp and kphone-3.11-gsm/.configure.in.swp differ
diff -r -N -u kphone-3.11/Makefile.in kphone-3.11-gsm/Makefile.in
--- kphone-3.11/Makefile.in	Wed Jan 22 10:45:56 2003
+++ kphone-3.11-gsm/Makefile.in	Mon Aug  4 20:54:04 2003
@@ -103,6 +103,7 @@
 LIBJPEG = @LIBJPEG@
 LIBMICO = @LIBMICO@
 LIBOBJS = @LIBOBJS@
+LIBPCSCLITE = @LIBPCSCLITE@
 LIBPNG = @LIBPNG@
 LIBPTHREAD = @LIBPTHREAD@
 LIBPYTHON = @LIBPYTHON@
@@ -146,6 +147,8 @@
 PAMINC = @PAMINC@
 PAMLIBPATHS = @PAMLIBPATHS@
 PAMLIBS = @PAMLIBS@
+PCSCLITE_INCLUDES = @PCSCLITE_INCLUDES@
+PCSCLITE_LDFLAGS = @PCSCLITE_LDFLAGS@
 PYTHONINC = @PYTHONINC@
 PYTHONLIB = @PYTHONLIB@
 PYTHONMODDIR = @PYTHONMODDIR@
diff -r -N -u kphone-3.11/configure kphone-3.11-gsm/configure
--- kphone-3.11/configure	Fri Jan 24 11:59:08 2003
+++ kphone-3.11-gsm/configure	Mon Aug  4 20:54:04 2003
@@ -9,8 +9,9 @@
 
 # Defaults:
 ac_help=
-ac_default_prefix=/usr
+ac_default_prefix=/usr/local
 # Any additions from configure.in:
+ac_default_prefix=${KDEDIR:-/usr/local/kde}
 ac_help="$ac_help
   --disable-fast-perl     disable fast Makefile generation (needs perl)"
 ac_help="$ac_help
@@ -58,6 +59,10 @@
   --disable-dlopen        link statically [default=no] "
 ac_help="$ac_help
   --with-ssl-dir=DIR       where the root of OpenSSL is installed "
+ac_help="$ac_help
+  --enable-gsm_auth    enable GSM authentication (default is NO)"
+ac_help="$ac_help
+  --with-pcsclite-dir=DIR       where the root of pcsc-lite is installed "
 
 # Initialize some variables set by options.
 # The variables have the same names as the options, with
@@ -616,7 +621,7 @@
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:621: checking host system type" >&5
+echo "configure:625: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
@@ -637,7 +642,7 @@
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:642: checking target system type" >&5
+echo "configure:646: checking target system type" >&5
 
 target_alias=$target
 case "$target_alias" in
@@ -655,7 +660,7 @@
 echo "$ac_t""$target" 1>&6
 
 echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:660: checking build system type" >&5
+echo "configure:664: checking build system type" >&5
 
 build_alias=$build
 case "$build_alias" in
@@ -714,7 +719,7 @@
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:719: checking for a BSD compatible install" >&5
+echo "configure:723: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -771,7 +776,7 @@
     # OK, user hasn't given any INSTALL, autoconf found one for us
     # now we test, if it supports the -p flag
     echo $ac_n "checking for -p flag to install""... $ac_c" 1>&6
-echo "configure:776: checking for -p flag to install" >&5
+echo "configure:780: checking for -p flag to install" >&5
     rm -f confinst.$$.* > /dev/null 2>&1
     echo "Testtest" > confinst.$$.orig
     ac_res=no
@@ -794,7 +799,7 @@
   fi
 
 echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
-echo "configure:799: checking whether build environment is sane" >&5
+echo "configure:803: checking whether build environment is sane" >&5
 # Just in case
 sleep 1
 echo timestamp > conftestfile
@@ -832,7 +837,7 @@
 rm -f conftest*
 echo "$ac_t""yes" 1>&6
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:837: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:841: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -859,9 +864,9 @@
 fi
 
 
-PACKAGE=kphone
+PACKAGE=kphone-3.11
 
-VERSION="3.0"
+VERSION="2.2alpha1"
 
 if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
   { echo "configure: error: source directory already configured; run "make distclean" there first" 1>&2; exit 1; }
@@ -878,7 +883,7 @@
 
 missing_dir=`cd $ac_aux_dir && pwd`
 echo $ac_n "checking for working aclocal""... $ac_c" 1>&6
-echo "configure:883: checking for working aclocal" >&5
+echo "configure:887: checking for working aclocal" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -891,7 +896,7 @@
 fi
 
 echo $ac_n "checking for working autoconf""... $ac_c" 1>&6
-echo "configure:896: checking for working autoconf" >&5
+echo "configure:900: checking for working autoconf" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -904,7 +909,7 @@
 fi
 
 echo $ac_n "checking for working automake""... $ac_c" 1>&6
-echo "configure:909: checking for working automake" >&5
+echo "configure:913: checking for working automake" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -917,7 +922,7 @@
 fi
 
 echo $ac_n "checking for working autoheader""... $ac_c" 1>&6
-echo "configure:922: checking for working autoheader" >&5
+echo "configure:926: checking for working autoheader" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -930,7 +935,7 @@
 fi
 
 echo $ac_n "checking for working makeinfo""... $ac_c" 1>&6
-echo "configure:935: checking for working makeinfo" >&5
+echo "configure:939: checking for working makeinfo" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
@@ -1036,13 +1041,13 @@
 
 
   echo $ac_n "checking for a C-Compiler""... $ac_c" 1>&6
-echo "configure:1041: checking for a C-Compiler" >&5
+echo "configure:1045: checking for a C-Compiler" >&5
     echo "$ac_t""$CC" 1>&6
 
   if test -z "$CC"; then # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1047: checking for $ac_word" >&5
+echo "configure:1051: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1071,7 +1076,7 @@
   if test -z "$CC"; then # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1076: checking for $ac_word" >&5
+echo "configure:1080: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1119,7 +1124,7 @@
   if test -z "$CC"; then # Extract the first word of "xlc", so it can be a program name with args.
 set dummy xlc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1124: checking for $ac_word" >&5
+echo "configure:1128: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1148,7 +1153,7 @@
   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
 
   echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1153: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:1157: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -1159,12 +1164,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 1164 "configure"
+#line 1168 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:1169: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1173: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -1190,12 +1195,12 @@
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1195: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1199: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
   echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:1200: checking whether we are using GNU C" >&5
+echo "configure:1204: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1204,7 +1209,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1209: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1213: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
@@ -1225,7 +1230,7 @@
   if test -z "$CFLAGS"; then
     if test "$kde_use_debug_code" = "yes"; then
       echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1230: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:1234: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1261,7 +1266,7 @@
 
     if test "$kde_use_profiling" = yes; then
        echo $ac_n "checking whether ${CC-cc} accepts -pg""... $ac_c" 1>&6
-echo "configure:1266: checking whether ${CC-cc} accepts -pg" >&5
+echo "configure:1270: checking whether ${CC-cc} accepts -pg" >&5
 if eval "test \"`echo '$''{'kde_cv_prog_cc_pg'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1307,7 +1312,7 @@
 
 
   echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1312: checking how to run the C preprocessor" >&5
+echo "configure:1316: checking how to run the C preprocessor" >&5
   # On Suns, sometimes $CPP names a directory.
   if test -n "$CPP" && test -d "$CPP"; then
     CPP=
@@ -1322,13 +1327,13 @@
     # On the NeXT, cc -E runs the code through the compiler's parser,
     # not just through cpp.
             cat > conftest.$ac_ext <<EOF
-#line 1327 "configure"
+#line 1331 "configure"
 #include "confdefs.h"
 #include <assert.h>
     Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1333: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1337: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1339,13 +1344,13 @@
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
     cat > conftest.$ac_ext <<EOF
-#line 1344 "configure"
+#line 1348 "configure"
 #include "confdefs.h"
 #include <assert.h>
     Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1350: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1354: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -1369,13 +1374,13 @@
   
 
   echo $ac_n "checking for a C++-Compiler""... $ac_c" 1>&6
-echo "configure:1374: checking for a C++-Compiler" >&5
+echo "configure:1378: checking for a C++-Compiler" >&5
     echo "$ac_t""$CXX" 1>&6
 
   if test -z "$CXX"; then # Extract the first word of "g++", so it can be a program name with args.
 set dummy g++; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1380: checking for $ac_word" >&5
+echo "configure:1384: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1404,7 +1409,7 @@
   if test -z "$CXX"; then # Extract the first word of "CC", so it can be a program name with args.
 set dummy CC; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1409: checking for $ac_word" >&5
+echo "configure:1413: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1433,7 +1438,7 @@
   if test -z "$CXX"; then # Extract the first word of "xlC", so it can be a program name with args.
 set dummy xlC; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1438: checking for $ac_word" >&5
+echo "configure:1442: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1462,7 +1467,7 @@
   if test -z "$CXX"; then # Extract the first word of "DCC", so it can be a program name with args.
 set dummy DCC; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1467: checking for $ac_word" >&5
+echo "configure:1471: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1491,7 +1496,7 @@
   test -z "$CXX" && { echo "configure: error: no acceptable C++-compiler found in \$PATH" 1>&2; exit 1; }
 
   echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1496: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
+echo "configure:1500: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) works" >&5
 
 
 ac_ext=C
@@ -1507,12 +1512,12 @@
 
 cat > conftest.$ac_ext << EOF
 
-#line 1512 "configure"
+#line 1516 "configure"
 #include "confdefs.h"
 
 int main(){return(0);}
 EOF
-if { (eval echo configure:1517: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1521: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cxx_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
@@ -1538,12 +1543,12 @@
   { echo "configure: error: installation or configuration problem: C++ compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1543: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1547: checking whether the C++ compiler ($CXX $CXXFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cxx_cross" 1>&6
 cross_compiling=$ac_cv_prog_cxx_cross
 
   echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
-echo "configure:1548: checking whether we are using GNU C++" >&5
+echo "configure:1552: checking whether we are using GNU C++" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1552,7 +1557,7 @@
   yes;
 #endif
 EOF
-if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1557: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CXX-g++} -E conftest.C'; { (eval echo configure:1561: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gxx=yes
 else
   ac_cv_prog_gxx=no
@@ -1571,7 +1576,7 @@
   if test -z "$CXXFLAGS"; then
     if test "$kde_use_debug_code" = "yes"; then
       echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
-echo "configure:1576: checking whether ${CXX-g++} accepts -g" >&5
+echo "configure:1580: checking whether ${CXX-g++} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cxx_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1604,7 +1609,7 @@
 
     if test "$kde_use_profiling" = yes; then
        echo $ac_n "checking whether ${CXX-g++} accepts -pg""... $ac_c" 1>&6
-echo "configure:1609: checking whether ${CXX-g++} accepts -pg" >&5
+echo "configure:1613: checking whether ${CXX-g++} accepts -pg" >&5
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_pg'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -1627,7 +1632,7 @@
     
 
 echo $ac_n "checking whether $CXX supports -fno-exceptions""... $ac_c" 1>&6
-echo "configure:1632: checking whether $CXX supports -fno-exceptions" >&5
+echo "configure:1636: checking whether $CXX supports -fno-exceptions" >&5
 kde_cache=`echo fno-exceptions | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1661,7 +1666,7 @@
     
 
 echo $ac_n "checking whether $CXX supports -fno-check-new""... $ac_c" 1>&6
-echo "configure:1666: checking whether $CXX supports -fno-check-new" >&5
+echo "configure:1670: checking whether $CXX supports -fno-check-new" >&5
 kde_cache=`echo fno-check-new | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1700,7 +1705,7 @@
          
 
 echo $ac_n "checking whether $CXX supports -Wno-long-long""... $ac_c" 1>&6
-echo "configure:1705: checking whether $CXX supports -Wno-long-long" >&5
+echo "configure:1709: checking whether $CXX supports -Wno-long-long" >&5
 kde_cache=`echo Wno-long-long | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1732,7 +1737,7 @@
          
 
 echo $ac_n "checking whether $CXX supports -Wnon-virtual-dtor""... $ac_c" 1>&6
-echo "configure:1737: checking whether $CXX supports -Wnon-virtual-dtor" >&5
+echo "configure:1741: checking whether $CXX supports -Wnon-virtual-dtor" >&5
 kde_cache=`echo Wnon-virtual-dtor | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1764,7 +1769,7 @@
          
 
 echo $ac_n "checking whether $CXX supports -fno-builtin""... $ac_c" 1>&6
-echo "configure:1769: checking whether $CXX supports -fno-builtin" >&5
+echo "configure:1773: checking whether $CXX supports -fno-builtin" >&5
 kde_cache=`echo fno-builtin | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1809,7 +1814,7 @@
     
 
 echo $ac_n "checking whether $CXX supports -fexceptions""... $ac_c" 1>&6
-echo "configure:1814: checking whether $CXX supports -fexceptions" >&5
+echo "configure:1818: checking whether $CXX supports -fexceptions" >&5
 kde_cache=`echo fexceptions | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1844,7 +1849,7 @@
     
 
 echo $ac_n "checking whether $CXX supports -frtti""... $ac_c" 1>&6
-echo "configure:1849: checking whether $CXX supports -frtti" >&5
+echo "configure:1853: checking whether $CXX supports -frtti" >&5
 kde_cache=`echo frtti | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1933,7 +1938,7 @@
 
 
     echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
-echo "configure:1938: checking how to run the C++ preprocessor" >&5
+echo "configure:1942: checking how to run the C++ preprocessor" >&5
     if test -z "$CXXCPP"; then
       if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -1950,12 +1955,12 @@
 
          CXXCPP="${CXX-g++} -E"
          cat > conftest.$ac_ext <<EOF
-#line 1955 "configure"
+#line 1959 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1960: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1964: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
@@ -2016,7 +2021,7 @@
   
 
 echo $ac_n "checking whether $CXX supports -frepo""... $ac_c" 1>&6
-echo "configure:2021: checking whether $CXX supports -frepo" >&5
+echo "configure:2025: checking whether $CXX supports -frepo" >&5
 kde_cache=`echo frepo | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2051,7 +2056,7 @@
   
 
 echo $ac_n "checking whether $CXX supports -instances=explicit""... $ac_c" 1>&6
-echo "configure:2056: checking whether $CXX supports -instances=explicit" >&5
+echo "configure:2060: checking whether $CXX supports -instances=explicit" >&5
 kde_cache=`echo instances=explicit | sed 'y%.=/+-%___p_%'`
 if eval "test \"`echo '$''{'kde_cv_prog_cxx_$kde_cache'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2211,7 +2216,7 @@
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
-echo "configure:2216: checking for ld used by GCC" >&5
+echo "configure:2220: checking for ld used by GCC" >&5
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
@@ -2241,10 +2246,10 @@
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:2246: checking for GNU ld" >&5
+echo "configure:2250: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:2249: checking for non-GNU ld" >&5
+echo "configure:2253: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'lt_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -2279,7 +2284,7 @@
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:2284: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:2288: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'lt_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2296,7 +2301,7 @@
 
 
 echo $ac_n "checking for $LD option to reload object files""... $ac_c" 1>&6
-echo "configure:2301: checking for $LD option to reload object files" >&5
+echo "configure:2305: checking for $LD option to reload object files" >&5
 if eval "test \"`echo '$''{'lt_cv_ld_reload_flag'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2308,7 +2313,7 @@
 test -n "$reload_flag" && reload_flag=" $reload_flag"
 
 echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
-echo "configure:2313: checking for BSD-compatible nm" >&5
+echo "configure:2317: checking for BSD-compatible nm" >&5
 if eval "test \"`echo '$''{'lt_cv_path_NM'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2346,7 +2351,7 @@
 echo "$ac_t""$NM" 1>&6
 
 echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
-echo "configure:2351: checking whether ln -s works" >&5
+echo "configure:2355: checking whether ln -s works" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2367,7 +2372,7 @@
 fi
 
 echo $ac_n "checking how to recognise dependant libraries""... $ac_c" 1>&6
-echo "configure:2372: checking how to recognise dependant libraries" >&5
+echo "configure:2376: checking how to recognise dependant libraries" >&5
 if eval "test \"`echo '$''{'lt_cv_deplibs_check_method'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2555,7 +2560,7 @@
 file_magic*)
   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
     echo $ac_n "checking for ${ac_tool_prefix}file""... $ac_c" 1>&6
-echo "configure:2560: checking for ${ac_tool_prefix}file" >&5
+echo "configure:2564: checking for ${ac_tool_prefix}file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2617,7 +2622,7 @@
 if test -z "$lt_cv_path_MAGIC_CMD"; then
   if test -n "$ac_tool_prefix"; then
     echo $ac_n "checking for file""... $ac_c" 1>&6
-echo "configure:2622: checking for file" >&5
+echo "configure:2626: checking for file" >&5
 if eval "test \"`echo '$''{'lt_cv_path_MAGIC_CMD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2688,7 +2693,7 @@
 # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2693: checking for $ac_word" >&5
+echo "configure:2697: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2720,7 +2725,7 @@
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2725: checking for $ac_word" >&5
+echo "configure:2729: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2755,7 +2760,7 @@
 # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
 set dummy ${ac_tool_prefix}strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2760: checking for $ac_word" >&5
+echo "configure:2764: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2787,7 +2792,7 @@
   # Extract the first word of "strip", so it can be a program name with args.
 set dummy strip; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:2792: checking for $ac_word" >&5
+echo "configure:2796: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_STRIP'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2854,8 +2859,8 @@
 case $host in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 2859 "configure"' > conftest.$ac_ext
-  if { (eval echo configure:2860: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  echo '#line 2863 "configure"' > conftest.$ac_ext
+  if { (eval echo configure:2864: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case `/usr/bin/file conftest.$ac_objext` in
     *32-bit*)
       LD="${LD-ld} -32"
@@ -2876,7 +2881,7 @@
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
-echo "configure:2881: checking whether the C compiler needs -belf" >&5
+echo "configure:2885: checking whether the C compiler needs -belf" >&5
 if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -2889,14 +2894,14 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
      cat > conftest.$ac_ext <<EOF
-#line 2894 "configure"
+#line 2898 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2901: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2905: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   lt_cv_cc_needs_belf=yes
 else
@@ -2927,12 +2932,12 @@
 
 
 echo $ac_n "checking for Cygwin environment""... $ac_c" 1>&6
-echo "configure:2932: checking for Cygwin environment" >&5
+echo "configure:2936: checking for Cygwin environment" >&5
 if eval "test \"`echo '$''{'ac_cv_cygwin'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2937 "configure"
+#line 2941 "configure"
 #include "confdefs.h"
 
 int main() {
@@ -2943,7 +2948,7 @@
 return __CYGWIN__;
 ; return 0; }
 EOF
-if { (eval echo configure:2948: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2952: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_cygwin=yes
 else
@@ -2960,19 +2965,19 @@
 CYGWIN=
 test "$ac_cv_cygwin" = yes && CYGWIN=yes
 echo $ac_n "checking for mingw32 environment""... $ac_c" 1>&6
-echo "configure:2965: checking for mingw32 environment" >&5
+echo "configure:2969: checking for mingw32 environment" >&5
 if eval "test \"`echo '$''{'ac_cv_mingw32'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2970 "configure"
+#line 2974 "configure"
 #include "confdefs.h"
 
 int main() {
 return __MINGW32__;
 ; return 0; }
 EOF
-if { (eval echo configure:2977: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2981: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_mingw32=yes
 else
@@ -3107,13 +3112,13 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking for object suffix""... $ac_c" 1>&6
-echo "configure:3112: checking for object suffix" >&5
+echo "configure:3116: checking for object suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_objext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   rm -f conftest*
 echo 'int i = 1;' > conftest.$ac_ext
-if { (eval echo configure:3118: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3122: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   for ac_file in conftest.*; do
     case $ac_file in
     *.c) ;;
@@ -3133,7 +3138,7 @@
 
 
 echo $ac_n "checking for executable suffix""... $ac_c" 1>&6
-echo "configure:3138: checking for executable suffix" >&5
+echo "configure:3142: checking for executable suffix" >&5
 if eval "test \"`echo '$''{'ac_cv_exeext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3143,7 +3148,7 @@
   rm -f conftest*
   echo 'int main () { return 0; }' > conftest.$ac_ext
   ac_cv_exeext=
-  if { (eval echo configure:3148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
+  if { (eval echo configure:3152: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
     for file in conftest.*; do
       case $file in
       *.c | *.o | *.obj) ;;
@@ -3189,7 +3194,7 @@
     # Extract the first word of "msgfmt", so it can be a program name with args.
 set dummy msgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3194: checking for $ac_word" >&5
+echo "configure:3198: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3223,7 +3228,7 @@
     # Extract the first word of "gmsgfmt", so it can be a program name with args.
 set dummy gmsgfmt; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3228: checking for $ac_word" >&5
+echo "configure:3232: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3268,7 +3273,7 @@
       # Extract the first word of "xgettext", so it can be a program name with args.
 set dummy xgettext; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:3273: checking for $ac_word" >&5
+echo "configure:3277: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3321,7 +3326,7 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
       echo $ac_n "checking for main in -lcompat""... $ac_c" 1>&6
-echo "configure:3326: checking for main in -lcompat" >&5
+echo "configure:3330: checking for main in -lcompat" >&5
 ac_lib_var=`echo compat'_'main | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3329,14 +3334,14 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lcompat  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3334 "configure"
+#line 3338 "configure"
 #include "confdefs.h"
 
 int main() {
 main()
 ; return 0; }
 EOF
-if { (eval echo configure:3341: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3345: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3358,7 +3363,7 @@
     
    kde_have_crypt=
    echo $ac_n "checking for crypt in -lcrypt""... $ac_c" 1>&6
-echo "configure:3363: checking for crypt in -lcrypt" >&5
+echo "configure:3367: checking for crypt in -lcrypt" >&5
 ac_lib_var=`echo crypt'_'crypt | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3366,7 +3371,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypt  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3371 "configure"
+#line 3375 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3377,7 +3382,7 @@
 crypt()
 ; return 0; }
 EOF
-if { (eval echo configure:3382: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3396,7 +3401,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for crypt in -lc""... $ac_c" 1>&6
-echo "configure:3401: checking for crypt in -lc" >&5
+echo "configure:3405: checking for crypt in -lc" >&5
 ac_lib_var=`echo c'_'crypt | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3404,7 +3409,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3409 "configure"
+#line 3413 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3415,7 +3420,7 @@
 crypt()
 ; return 0; }
 EOF
-if { (eval echo configure:3420: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3424: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3434,11 +3439,11 @@
 else
   echo "$ac_t""no" 1>&6
 
-        echo "configure: error: you have no crypt in either libcrypt or libc.
+        echo "configure: warning: you have no crypt in either libcrypt or libc.
 You should install libcrypt from another source or configure with PAM
 support" 1>&2
 	kde_have_crypt=no
-      exit 1;
+      
 fi
 
 fi
@@ -3452,7 +3457,7 @@
    fi
    
   echo $ac_n "checking for socklen_t""... $ac_c" 1>&6
-echo "configure:3457: checking for socklen_t" >&5
+echo "configure:3461: checking for socklen_t" >&5
   if eval "test \"`echo '$''{'ac_cv_socklen_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -3469,7 +3474,7 @@
 
 
     cat > conftest.$ac_ext <<EOF
-#line 3474 "configure"
+#line 3478 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -3482,7 +3487,7 @@
       
 ; return 0; }
 EOF
-if { (eval echo configure:3487: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3491: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_socklen_t=socklen_t
 else
@@ -3490,7 +3495,7 @@
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 3495 "configure"
+#line 3499 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
@@ -3503,7 +3508,7 @@
         
 ; return 0; }
 EOF
-if { (eval echo configure:3508: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:3512: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_socklen_t=int
 else
@@ -3549,7 +3554,7 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
    echo $ac_n "checking for dnet_ntoa in -ldnet""... $ac_c" 1>&6
-echo "configure:3554: checking for dnet_ntoa in -ldnet" >&5
+echo "configure:3558: checking for dnet_ntoa in -ldnet" >&5
 ac_lib_var=`echo dnet'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3557,7 +3562,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3562 "configure"
+#line 3566 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3568,7 +3573,7 @@
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:3573: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3577: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3590,7 +3595,7 @@
 
    if test $ac_cv_lib_dnet_dnet_ntoa = no; then
       echo $ac_n "checking for dnet_ntoa in -ldnet_stub""... $ac_c" 1>&6
-echo "configure:3595: checking for dnet_ntoa in -ldnet_stub" >&5
+echo "configure:3599: checking for dnet_ntoa in -ldnet_stub" >&5
 ac_lib_var=`echo dnet_stub'_'dnet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3598,7 +3603,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldnet_stub  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3603 "configure"
+#line 3607 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3609,7 +3614,7 @@
 dnet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:3614: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3618: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3631,12 +3636,12 @@
 
    fi
    echo $ac_n "checking for inet_ntoa""... $ac_c" 1>&6
-echo "configure:3636: checking for inet_ntoa" >&5
+echo "configure:3640: checking for inet_ntoa" >&5
 if eval "test \"`echo '$''{'ac_cv_func_inet_ntoa'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3641 "configure"
+#line 3645 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char inet_ntoa(); below.  */
@@ -3659,7 +3664,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3664: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3668: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_inet_ntoa=yes"
 else
@@ -3680,7 +3685,7 @@
 
    if test $ac_cv_func_inet_ntoa = no; then
      echo $ac_n "checking for inet_ntoa in -lnsl""... $ac_c" 1>&6
-echo "configure:3685: checking for inet_ntoa in -lnsl" >&5
+echo "configure:3689: checking for inet_ntoa in -lnsl" >&5
 ac_lib_var=`echo nsl'_'inet_ntoa | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3688,7 +3693,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3693 "configure"
+#line 3697 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3699,7 +3704,7 @@
 inet_ntoa()
 ; return 0; }
 EOF
-if { (eval echo configure:3704: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3708: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3721,12 +3726,12 @@
 
    fi
    echo $ac_n "checking for connect""... $ac_c" 1>&6
-echo "configure:3726: checking for connect" >&5
+echo "configure:3730: checking for connect" >&5
 if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3731 "configure"
+#line 3735 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char connect(); below.  */
@@ -3749,7 +3754,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3754: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3758: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_connect=yes"
 else
@@ -3770,7 +3775,7 @@
 
    if test $ac_cv_func_connect = no; then
       echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
-echo "configure:3775: checking for connect in -lsocket" >&5
+echo "configure:3779: checking for connect in -lsocket" >&5
 ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3778,7 +3783,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3783 "configure"
+#line 3787 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3789,7 +3794,7 @@
 connect()
 ; return 0; }
 EOF
-if { (eval echo configure:3794: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3798: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3812,12 +3817,12 @@
    fi
 
    echo $ac_n "checking for remove""... $ac_c" 1>&6
-echo "configure:3817: checking for remove" >&5
+echo "configure:3821: checking for remove" >&5
 if eval "test \"`echo '$''{'ac_cv_func_remove'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3822 "configure"
+#line 3826 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char remove(); below.  */
@@ -3840,7 +3845,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3849: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_remove=yes"
 else
@@ -3861,7 +3866,7 @@
 
    if test $ac_cv_func_remove = no; then
       echo $ac_n "checking for remove in -lposix""... $ac_c" 1>&6
-echo "configure:3866: checking for remove in -lposix" >&5
+echo "configure:3870: checking for remove in -lposix" >&5
 ac_lib_var=`echo posix'_'remove | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3869,7 +3874,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lposix  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3874 "configure"
+#line 3878 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3880,7 +3885,7 @@
 remove()
 ; return 0; }
 EOF
-if { (eval echo configure:3885: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3889: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3904,12 +3909,12 @@
 
    # BSDI BSD/OS 2.1 needs -lipc for XOpenDisplay.
    echo $ac_n "checking for shmat""... $ac_c" 1>&6
-echo "configure:3909: checking for shmat" >&5
+echo "configure:3913: checking for shmat" >&5
 if eval "test \"`echo '$''{'ac_cv_func_shmat'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3914 "configure"
+#line 3918 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shmat(); below.  */
@@ -3932,7 +3937,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:3937: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3941: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_shmat=yes"
 else
@@ -3950,7 +3955,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for shmat in -lipc""... $ac_c" 1>&6
-echo "configure:3955: checking for shmat in -lipc" >&5
+echo "configure:3959: checking for shmat in -lipc" >&5
 ac_lib_var=`echo ipc'_'shmat | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -3958,7 +3963,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lipc  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3963 "configure"
+#line 3967 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3969,7 +3974,7 @@
 shmat()
 ; return 0; }
 EOF
-if { (eval echo configure:3974: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3978: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -3994,12 +3999,12 @@
    
    # Solaris 2.6 needs -lresolv for res_init
    echo $ac_n "checking for res_init""... $ac_c" 1>&6
-echo "configure:3999: checking for res_init" >&5
+echo "configure:4003: checking for res_init" >&5
 if eval "test \"`echo '$''{'ac_cv_func_res_init'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4004 "configure"
+#line 4008 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char res_init(); below.  */
@@ -4022,7 +4027,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:4027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4031: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_res_init=yes"
 else
@@ -4040,7 +4045,7 @@
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for res_init in -lresolv""... $ac_c" 1>&6
-echo "configure:4045: checking for res_init in -lresolv" >&5
+echo "configure:4049: checking for res_init in -lresolv" >&5
 ac_lib_var=`echo resolv'_'res_init | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4048,7 +4053,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4053 "configure"
+#line 4057 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4059,7 +4064,7 @@
 res_init()
 ; return 0; }
 EOF
-if { (eval echo configure:4064: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4068: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4086,7 +4091,7 @@
    
    
    echo $ac_n "checking for killpg in -lucb""... $ac_c" 1>&6
-echo "configure:4091: checking for killpg in -lucb" >&5
+echo "configure:4095: checking for killpg in -lucb" >&5
 ac_lib_var=`echo ucb'_'killpg | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4094,7 +4099,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lucb  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4099 "configure"
+#line 4103 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4105,7 +4110,7 @@
 killpg()
 ; return 0; }
 EOF
-if { (eval echo configure:4110: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4114: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4128,11 +4133,11 @@
 
    case $host in     *-*-lynxos* )
         echo $ac_n "checking LynxOS header file wrappers""... $ac_c" 1>&6
-echo "configure:4133: checking LynxOS header file wrappers" >&5
+echo "configure:4137: checking LynxOS header file wrappers" >&5
         CFLAGS="$CFLAGS -D__NO_INCLUDE_WARN__"
         echo "$ac_t""disabled" 1>&6
         echo $ac_n "checking for gethostbyname in -lbsd""... $ac_c" 1>&6
-echo "configure:4137: checking for gethostbyname in -lbsd" >&5
+echo "configure:4141: checking for gethostbyname in -lbsd" >&5
 ac_lib_var=`echo bsd'_'gethostbyname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4140,7 +4145,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lbsd  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4145 "configure"
+#line 4149 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4151,7 +4156,7 @@
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:4156: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4160: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4174,7 +4179,7 @@
     esac
 
      echo $ac_n "checking size of int""... $ac_c" 1>&6
-echo "configure:4179: checking size of int" >&5
+echo "configure:4183: checking size of int" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_int'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4182,7 +4187,7 @@
   ac_cv_sizeof_int=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 4187 "configure"
+#line 4191 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main()
@@ -4193,7 +4198,7 @@
   return(0);
 }
 EOF
-if { (eval echo configure:4198: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4202: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_int=`cat conftestval`
 else
@@ -4212,7 +4217,7 @@
 EOF
 
   echo $ac_n "checking size of long""... $ac_c" 1>&6
-echo "configure:4217: checking size of long" >&5
+echo "configure:4221: checking size of long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4220,7 +4225,7 @@
   ac_cv_sizeof_long=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 4225 "configure"
+#line 4229 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main()
@@ -4231,7 +4236,7 @@
   return(0);
 }
 EOF
-if { (eval echo configure:4236: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long=`cat conftestval`
 else
@@ -4250,7 +4255,7 @@
 EOF
 
   echo $ac_n "checking size of char *""... $ac_c" 1>&6
-echo "configure:4255: checking size of char *" >&5
+echo "configure:4259: checking size of char *" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_char_p'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4258,7 +4263,7 @@
   ac_cv_sizeof_char_p=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 4263 "configure"
+#line 4267 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main()
@@ -4269,7 +4274,7 @@
   return(0);
 }
 EOF
-if { (eval echo configure:4274: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4278: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_char_p=`cat conftestval`
 else
@@ -4288,7 +4293,7 @@
 EOF
 
   echo $ac_n "checking size of char""... $ac_c" 1>&6
-echo "configure:4293: checking size of char" >&5
+echo "configure:4297: checking size of char" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_char'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4296,7 +4301,7 @@
   ac_cv_sizeof_char=1
 else
   cat > conftest.$ac_ext <<EOF
-#line 4301 "configure"
+#line 4305 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 int main()
@@ -4307,7 +4312,7 @@
   return(0);
 }
 EOF
-if { (eval echo configure:4312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4316: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_char=`cat conftestval`
 else
@@ -4328,7 +4333,7 @@
 
    
 echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:4333: checking for dlopen in -ldl" >&5
+echo "configure:4337: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4336,7 +4341,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4341 "configure"
+#line 4345 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4347,7 +4352,7 @@
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:4352: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4356: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4372,7 +4377,7 @@
 
 
 echo $ac_n "checking for shl_unload in -ldld""... $ac_c" 1>&6
-echo "configure:4377: checking for shl_unload in -ldld" >&5
+echo "configure:4381: checking for shl_unload in -ldld" >&5
 ac_lib_var=`echo dld'_'shl_unload | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4380,7 +4385,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4385 "configure"
+#line 4389 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4391,7 +4396,7 @@
 shl_unload()
 ; return 0; }
 EOF
-if { (eval echo configure:4396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4400: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4420,7 +4425,7 @@
 
 
 echo $ac_n "checking for extra includes""... $ac_c" 1>&6
-echo "configure:4425: checking for extra includes" >&5
+echo "configure:4429: checking for extra includes" >&5
 # Check whether --with-extra-includes or --without-extra-includes was given.
 if test "${with_extra_includes+set}" = set; then
   withval="$with_extra_includes"
@@ -4451,7 +4456,7 @@
 
 kde_extra_libs=
 echo $ac_n "checking for extra libs""... $ac_c" 1>&6
-echo "configure:4456: checking for extra libs" >&5
+echo "configure:4460: checking for extra libs" >&5
 # Check whether --with-extra-libs or --without-extra-libs was given.
 if test "${with_extra_libs+set}" = set; then
   withval="$with_extra_libs"
@@ -4484,8 +4489,64 @@
 
 
 
+echo $ac_n "checking for libz""... $ac_c" 1>&6
+echo "configure:4494: checking for libz" >&5
+if eval "test \"`echo '$''{'ac_cv_lib_z'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+ac_ext=c
+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+cross_compiling=$ac_cv_prog_cc_cross
+
+kde_save_LIBS="$LIBS"
+LIBS="$all_libraries $USER_LDFLAGS -lz $LIBSOCKET"
+kde_save_CFLAGS="$CFLAGS"
+CFLAGS="$CFLAGS $all_includes $USER_INCLUDES"
+cat > conftest.$ac_ext <<EOF
+#line 4511 "configure"
+#include "confdefs.h"
+
+#include<zlib.h>
+
+int main() {
+return (zlibVersion() == ZLIB_VERSION); 
+; return 0; }
+EOF
+if { (eval echo configure:4520: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_z='-lz'"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_z=no"
+fi
+rm -f conftest*
+LIBS="$kde_save_LIBS"
+CFLAGS="$kde_save_CFLAGS"
+
+fi
+if test ! "$ac_cv_lib_z" = no; then
+  cat >> confdefs.h <<EOF
+#define HAVE_LIBZ 1
+EOF
+
+  LIBZ="$ac_cv_lib_z"
+  
+  echo "$ac_t""$ac_cv_lib_z" 1>&6
+else
+  { echo "configure: error: not found. Check your installation and look into config.log" 1>&2; exit 1; }
+  LIBZ=""
+  
+fi
+
+
 echo $ac_n "checking for X""... $ac_c" 1>&6
-echo "configure:4546: checking for X" >&5
+echo "configure:4550: checking for X" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -4519,12 +4580,12 @@
 
   # First, try using that file with no special directory specified.
 cat > conftest.$ac_ext <<EOF
-#line 4580 "configure"
+#line 4584 "configure"
 #include "confdefs.h"
 #include <$x_direct_test_include>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4585: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:4589: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -4593,14 +4654,14 @@
   ac_save_LIBS="$LIBS"
   LIBS="-l$x_direct_test_library $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4654 "configure"
+#line 4658 "configure"
 #include "confdefs.h"
 
 int main() {
 ${x_direct_test_function}()
 ; return 0; }
 EOF
-if { (eval echo configure:4661: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4665: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   LIBS="$ac_save_LIBS"
 # We can link X programs with no special library path.
@@ -4771,7 +4832,7 @@
 # libraries we check for below, so use a different variable.
 #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
 echo $ac_n "checking for IceConnectionNumber in -lICE""... $ac_c" 1>&6
-echo "configure:4832: checking for IceConnectionNumber in -lICE" >&5
+echo "configure:4836: checking for IceConnectionNumber in -lICE" >&5
 ac_lib_var=`echo ICE'_'IceConnectionNumber | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -4779,7 +4840,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lICE $X_EXTRA_LIBS $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 4840 "configure"
+#line 4844 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4790,7 +4851,7 @@
 IceConnectionNumber()
 ; return 0; }
 EOF
-if { (eval echo configure:4851: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4855: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -4819,7 +4880,7 @@
 
 
 echo $ac_n "checking for libXext""... $ac_c" 1>&6
-echo "configure:4880: checking for libXext" >&5
+echo "configure:4884: checking for libXext" >&5
 if eval "test \"`echo '$''{'kde_cv_have_libXext'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4831,7 +4892,7 @@
 LIBS="-lXext -lX11 $LIBSOCKET"
 
 cat > conftest.$ac_ext <<EOF
-#line 4892 "configure"
+#line 4896 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
@@ -4842,7 +4903,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:4903: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   kde_cv_have_libXext=yes
 else
@@ -4930,7 +4991,7 @@
 
 
 echo $ac_n "checking for libpng""... $ac_c" 1>&6
-echo "configure:4991: checking for libpng" >&5
+echo "configure:4995: checking for libpng" >&5
 if eval "test \"`echo '$''{'ac_cv_lib_png'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -4947,7 +5008,7 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
 cat > conftest.$ac_ext <<EOF
-#line 5008 "configure"
+#line 5012 "configure"
 #include "confdefs.h"
     
     #include<png.h>
@@ -4960,7 +5021,7 @@
     
 ; return 0; }
 EOF
-if { (eval echo configure:5021: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:5025: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_png='-lpng $LIBZ -lm'"
 else
@@ -4991,6 +5052,194 @@
 
 
 
+echo $ac_n "checking for libjpeg6b""... $ac_c" 1>&6
+echo "configure:5057: checking for libjpeg6b" >&5
+if eval "test \"`echo '$''{'ac_cv_lib_jpeg_6b'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+ac_ext=c
+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+cross_compiling=$ac_cv_prog_cc_cross
+
+ac_save_LIBS="$LIBS"
+LIBS="$all_libraries $USER_LDFLAGS -ljpeg6b -lm"
+ac_save_CFLAGS="$CFLAGS"
+CFLAGS="$CFLAGS $all_includes $USER_INCLUDES"
+cat > conftest.$ac_ext <<EOF
+#line 5074 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+struct jpeg_decompress_struct;
+typedef struct jpeg_decompress_struct * j_decompress_ptr;
+typedef int size_t;
+#ifdef __cplusplus
+extern "C" {
+#endif
+    void jpeg_CreateDecompress(j_decompress_ptr cinfo,
+                                    int version, size_t structsize);
+#ifdef __cplusplus
+}
+#endif
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+
+int main() {
+jpeg_CreateDecompress(0L, 0, 0);
+; return 0; }
+EOF
+if { (eval echo configure:5095: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_jpeg_6b=-ljpeg6b"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_jpeg_6b=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+CFLAGS="$ac_save_CFLAGS"
+
+fi
+
+
+if eval "test ! \"`echo $ac_cv_lib_jpeg_6b`\" = no"; then
+  LIBJPEG="$ac_cv_lib_jpeg_6b"
+  echo "$ac_t""$ac_cv_lib_jpeg_6b" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+  
+echo $ac_n "checking for libjpeg""... $ac_c" 1>&6
+echo "configure:5118: checking for libjpeg" >&5
+if eval "test \"`echo '$''{'ac_cv_lib_jpeg_normal'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+ac_ext=c
+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+cross_compiling=$ac_cv_prog_cc_cross
+
+ac_save_LIBS="$LIBS"
+LIBS="$all_libraries $USER_LDFLAGS -ljpeg -lm"
+ac_save_CFLAGS="$CFLAGS"
+CFLAGS="$CFLAGS $all_includes $USER_INCLUDES"
+cat > conftest.$ac_ext <<EOF
+#line 5135 "configure"
+#include "confdefs.h"
+/* Override any gcc2 internal prototype to avoid an error.  */
+struct jpeg_decompress_struct;
+typedef struct jpeg_decompress_struct * j_decompress_ptr;
+typedef int size_t;
+#ifdef __cplusplus
+extern "C" {
+#endif
+    void jpeg_CreateDecompress(j_decompress_ptr cinfo,
+                                    int version, size_t structsize);
+#ifdef __cplusplus
+}
+#endif
+/* We use char because int might match the return type of a gcc2
+    builtin and then its argument prototype would still apply.  */
+
+int main() {
+jpeg_CreateDecompress(0L, 0, 0);
+; return 0; }
+EOF
+if { (eval echo configure:5156: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+  rm -rf conftest*
+  eval "ac_cv_lib_jpeg_normal=-ljpeg"
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_lib_jpeg_normal=no"
+fi
+rm -f conftest*
+LIBS="$ac_save_LIBS"
+CFLAGS="$ac_save_CFLAGS"
+
+fi
+
+
+if eval "test ! \"`echo $ac_cv_lib_jpeg_normal`\" = no"; then
+  LIBJPEG="$ac_cv_lib_jpeg_normal"
+  echo "$ac_t""$ac_cv_lib_jpeg_normal" 1>&6
+else
+  echo "$ac_t""no" 1>&6
+  
+	if test -f "$kde_libraries/libjpeg.so"; then
+	   test -f ./libjpegkde.so || $LN_S $kde_libraries/libjpeg.so ./libjpegkde.so
+	   ac_cv_lib_jpeg="-L\${topdir} -ljpegkde"
+	else if test -f "$kde_libraries/libjpeg.sl"; then
+	   test -f ./libjpegkde.sl ||$LN_S $kde_libraries/libjpeg.sl ./libjpegkde.sl
+	   ac_cv_lib_jpeg="-L\${topdir} -ljpegkde"	
+	else if test -f "$kde_libraries/libjpeg.a"; then
+	   test -f ./libjpegkde.a || $LN_S $kde_libraries/libjpeg.a ./libjpegkde.a
+	   ac_cv_lib_jpeg="-L\${topdir} -ljpegkde"
+        else
+	  ac_cv_lib_jpeg=
+	fi
+      fi
+   fi
+
+   LIBJPEG=$ac_cv_lib_jpeg
+
+fi
+
+
+fi
+
+
+
+jpeg_incdirs="/usr/include /usr/local/include $kde_extra_includes"
+
+jpeg_incdir=NO
+for i in $jpeg_incdirs;
+do
+  for j in jpeglib.h;
+  do
+    if test -r "$i/$j"; then
+      jpeg_incdir=$i
+      break 2
+    fi
+  done
+done
+
+test "x$jpeg_incdir" = xNO && jpeg_incdir=
+
+if test -n "$jpeg_incdir" && test -n "$LIBJPEG" ; then
+  cat >> confdefs.h <<EOF
+#define HAVE_LIBJPEG 1
+EOF
+
+else
+  if test -n "$jpeg_incdir" || test -n "$LIBJPEG" ; then
+    echo "configure: warning: 
+There is an installation error in jpeg support. You seem to have only one
+of either the headers _or_ the libraries installed. You may need to either
+provide correct --with-extra-... options, or the development package of
+libjpeg6b. You can get a source package of libjpeg from http://www.ijg.org/
+Disabling JPEG support.
+" 1>&2
+  else
+    echo "configure: warning: libjpeg not found. disable JPEG support." 1>&2
+  fi
+  jpeg_incdir=
+  LIBJPEG=
+fi
+
+
+
+
+
+
 
 
 
@@ -5068,7 +5317,7 @@
 fi
 
 echo $ac_n "checking for Qt""... $ac_c" 1>&6
-echo "configure:5317: checking for Qt" >&5
+echo "configure:5321: checking for Qt" >&5
 
 LIBQT="$LIBQT $X_PRE_LIBS -lXext -lX11 $LIBSM $LIBSOCKET"
 ac_qt_includes=NO ac_qt_libraries=NO ac_qt_bindir=NO
@@ -5227,7 +5476,7 @@
 EOF
 
 
-if { (eval echo configure:5476: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:5480: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   rm -f conftest*
 else
   echo "configure: failed program was:" >&5
@@ -5285,7 +5534,7 @@
 
 
 echo $ac_n "checking if Qt compiles without flags""... $ac_c" 1>&6
-echo "configure:5534: checking if Qt compiles without flags" >&5
+echo "configure:5538: checking if Qt compiles without flags" >&5
 if eval "test \"`echo '$''{'kde_cv_qt_direct'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -5364,7 +5613,7 @@
 EOF
 
 
-if { (eval echo configure:5613: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:5617: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   kde_cv_qt_direct="yes"
 else
   kde_cv_qt_direct="no"
@@ -5433,7 +5682,7 @@
 
    
    echo $ac_n "checking for moc""... $ac_c" 1>&6
-echo "configure:5682: checking for moc" >&5
+echo "configure:5686: checking for moc" >&5
    if test -n "$MOC"; then
         kde_cv_path="$MOC";
    else
@@ -5499,7 +5748,7 @@
    if test -z "$UIC_NOT_NEEDED"; then
      
    echo $ac_n "checking for uic""... $ac_c" 1>&6
-echo "configure:5748: checking for uic" >&5
+echo "configure:5752: checking for uic" >&5
    if test -n "$UIC"; then
         kde_cv_path="$UIC";
    else
@@ -5584,7 +5833,7 @@
 
 
 echo $ac_n "checking for rpath""... $ac_c" 1>&6
-echo "configure:5833: checking for rpath" >&5
+echo "configure:5837: checking for rpath" >&5
 # Check whether --enable-rpath or --disable-rpath was given.
 if test "${enable_rpath+set}" = set; then
   enableval="$enable_rpath"
@@ -5613,7 +5862,7 @@
 echo "$ac_t""$USE_RPATH" 1>&6
 
 echo $ac_n "checking for KDE""... $ac_c" 1>&6
-echo "configure:5862: checking for KDE" >&5
+echo "configure:5866: checking for KDE" >&5
 
 if test "${prefix}" != NONE; then
   kde_includes=${prefix}/include
@@ -5789,7 +6038,7 @@
 
 
 echo $ac_n "checking for KDE paths""... $ac_c" 1>&6
-echo "configure:6038: checking for KDE paths" >&5
+echo "configure:6042: checking for KDE paths" >&5
 kde_result=""
 kde_cached_paths=yes
 if eval "test \"`echo '$''{'kde_cv_all_paths'+set}'`\" = set"; then
@@ -5876,7 +6125,7 @@
      
   
     echo $ac_n "checking for KDE headers installed""... $ac_c" 1>&6
-echo "configure:6125: checking for KDE headers installed" >&5
+echo "configure:6129: checking for KDE headers installed" >&5
     
      ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -5916,7 +6165,7 @@
 EOF
 
  ac_compile='${CXX-g++} -c $CXXFLAGS $all_includes $CPPFLAGS conftest.$ac_ext'
- if { (eval echo configure:6165: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+ if { (eval echo configure:6169: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    echo "$ac_t""yes" 1>&6
  else
    { echo "configure: error: your system is not able to compile a small KDE application!
@@ -5953,10 +6202,10 @@
   fi
 
 echo $ac_n "checking for KDE libraries installed""... $ac_c" 1>&6
-echo "configure:6202: checking for KDE libraries installed" >&5
+echo "configure:6206: checking for KDE libraries installed" >&5
 ac_link='$LIBTOOL_SHELL --silent --mode=link ${CXX-g++} -o conftest $CXXFLAGS $all_includes $CPPFLAGS $LDFLAGS $all_libraries conftest.$ac_ext $LIBS -lkdecore $LIBQT $KDE_TEST_RPATH 1>&5'
 
-if { (eval echo configure:6205: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:6209: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   echo "$ac_t""yes" 1>&6
 else
   { echo "configure: error: your system fails at linking a small KDE application!
@@ -6107,7 +6356,7 @@
      
   
     echo $ac_n "checking for KDE headers installed""... $ac_c" 1>&6
-echo "configure:6356: checking for KDE headers installed" >&5
+echo "configure:6360: checking for KDE headers installed" >&5
     
      ac_ext=C
 # CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
@@ -6147,7 +6396,7 @@
 EOF
 
  ac_compile='${CXX-g++} -c $CXXFLAGS $all_includes $CPPFLAGS conftest.$ac_ext'
- if { (eval echo configure:6396: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+ if { (eval echo configure:6400: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
    echo "$ac_t""yes" 1>&6
  else
    { echo "configure: error: your system is not able to compile a small KDE application!
@@ -6184,10 +6433,10 @@
   fi
 
 echo $ac_n "checking for KDE libraries installed""... $ac_c" 1>&6
-echo "configure:6433: checking for KDE libraries installed" >&5
+echo "configure:6437: checking for KDE libraries installed" >&5
 ac_link='$LIBTOOL_SHELL --silent --mode=link ${CXX-g++} -o conftest $CXXFLAGS $all_includes $CPPFLAGS $LDFLAGS $all_libraries conftest.$ac_ext $LIBS -lkdecore $LIBQT $KDE_TEST_RPATH 1>&5'
 
-if { (eval echo configure:6436: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
+if { (eval echo configure:6440: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then
   echo "$ac_t""yes" 1>&6
 else
   { echo "configure: error: your system fails at linking a small KDE application!
@@ -6275,7 +6524,7 @@
         kde_default_bindirs="$exec_prefix/bin $prefix/bin $kde_default_bindirs"
         
    echo $ac_n "checking for dcopidl""... $ac_c" 1>&6
-echo "configure:6524: checking for dcopidl" >&5
+echo "configure:6528: checking for dcopidl" >&5
    if test -n "$DCOPIDL"; then
         kde_cv_path="$DCOPIDL";
    else
@@ -6335,7 +6584,7 @@
 
         
    echo $ac_n "checking for dcopidl2cpp""... $ac_c" 1>&6
-echo "configure:6584: checking for dcopidl2cpp" >&5
+echo "configure:6588: checking for dcopidl2cpp" >&5
    if test -n "$DCOPIDL2CPP"; then
         kde_cv_path="$DCOPIDL2CPP";
    else
@@ -6395,7 +6644,7 @@
 
         
    echo $ac_n "checking for mcopidl""... $ac_c" 1>&6
-echo "configure:6644: checking for mcopidl" >&5
+echo "configure:6648: checking for mcopidl" >&5
    if test -n "$MCOPIDL"; then
         kde_cv_path="$MCOPIDL";
    else
@@ -6455,7 +6704,7 @@
 
         
    echo $ac_n "checking for kdb2html""... $ac_c" 1>&6
-echo "configure:6704: checking for kdb2html" >&5
+echo "configure:6708: checking for kdb2html" >&5
    if test -n "$KDB2HTML"; then
         kde_cv_path="$KDB2HTML";
    else
@@ -6515,7 +6764,7 @@
 
         
    echo $ac_n "checking for artsc-config""... $ac_c" 1>&6
-echo "configure:6764: checking for artsc-config" >&5
+echo "configure:6768: checking for artsc-config" >&5
    if test -n "$ARTSCCONFIG"; then
         kde_cv_path="$ARTSCCONFIG";
    else
@@ -6575,7 +6824,7 @@
 
         
    echo $ac_n "checking for kde-config""... $ac_c" 1>&6
-echo "configure:6824: checking for kde-config" >&5
+echo "configure:6828: checking for kde-config" >&5
    if test -n "$KDECONFIG"; then
         kde_cv_path="$KDECONFIG";
    else
@@ -6764,12 +7013,12 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&6
-echo "configure:7013: checking for $ac_hdr that defines DIR" >&5
+echo "configure:7017: checking for $ac_hdr that defines DIR" >&5
 if eval "test \"`echo '$''{'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7018 "configure"
+#line 7022 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -6777,7 +7026,7 @@
 DIR *dirp = 0;
 ; return 0; }
 EOF
-if { (eval echo configure:7026: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:7030: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   eval "ac_cv_header_dirent_$ac_safe=yes"
 else
@@ -6802,7 +7051,7 @@
 # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
 if test $ac_header_dirent = dirent.h; then
 echo $ac_n "checking for opendir in -ldir""... $ac_c" 1>&6
-echo "configure:7051: checking for opendir in -ldir" >&5
+echo "configure:7055: checking for opendir in -ldir" >&5
 ac_lib_var=`echo dir'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -6810,7 +7059,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldir  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 7059 "configure"
+#line 7063 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -6821,7 +7070,7 @@
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:7070: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7074: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -6843,7 +7092,7 @@
 
 else
 echo $ac_n "checking for opendir in -lx""... $ac_c" 1>&6
-echo "configure:7092: checking for opendir in -lx" >&5
+echo "configure:7096: checking for opendir in -lx" >&5
 ac_lib_var=`echo x'_'opendir | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -6851,7 +7100,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-lx  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 7100 "configure"
+#line 7104 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -6862,7 +7111,7 @@
 opendir()
 ; return 0; }
 EOF
-if { (eval echo configure:7111: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7115: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -6885,12 +7134,12 @@
 fi
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:7134: checking for ANSI C header files" >&5
+echo "configure:7138: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7139 "configure"
+#line 7143 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
@@ -6898,7 +7147,7 @@
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7147: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7151: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -6915,7 +7164,7 @@
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 7164 "configure"
+#line 7168 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
@@ -6933,7 +7182,7 @@
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 7182 "configure"
+#line 7186 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
@@ -6954,7 +7203,7 @@
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 7203 "configure"
+#line 7207 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
@@ -6965,7 +7214,7 @@
 exit (0); }
 
 EOF
-if { (eval echo configure:7214: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:7218: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
@@ -6992,17 +7241,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7241: checking for $ac_hdr" >&5
+echo "configure:7245: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7246 "configure"
+#line 7250 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7251: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7255: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7032,17 +7281,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7281: checking for $ac_hdr" >&5
+echo "configure:7285: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7286 "configure"
+#line 7290 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7291: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7295: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7072,17 +7321,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7321: checking for $ac_hdr" >&5
+echo "configure:7325: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7326 "configure"
+#line 7330 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7331: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7335: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7110,12 +7359,12 @@
 
 
 echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:7359: checking whether time.h and sys/time.h may both be included" >&5
+echo "configure:7363: checking whether time.h and sys/time.h may both be included" >&5
 if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7364 "configure"
+#line 7368 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
@@ -7124,7 +7373,7 @@
 struct tm *tp;
 ; return 0; }
 EOF
-if { (eval echo configure:7373: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:7377: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_header_time=yes
 else
@@ -7146,7 +7395,7 @@
 
 
 echo $ac_n "checking for long double""... $ac_c" 1>&6
-echo "configure:7395: checking for long double" >&5
+echo "configure:7399: checking for long double" >&5
 if eval "test \"`echo '$''{'ac_cv_c_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7157,7 +7406,7 @@
     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
 else
   cat > conftest.$ac_ext <<EOF
-#line 7406 "configure"
+#line 7410 "configure"
 #include "confdefs.h"
 int main() {
 /* The Stardent Vistra knows sizeof(long double), but does not support it.  */
@@ -7165,7 +7414,7 @@
 /* On Ultrix 4.3 cc, long double is 4 and double is 8.  */
 exit(sizeof(long double) < sizeof(double)); }
 EOF
-if { (eval echo configure:7414: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:7418: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_c_long_double=yes
 else
@@ -7192,7 +7441,7 @@
 
 
 echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:7441: checking for dlopen in -ldl" >&5
+echo "configure:7445: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -7200,7 +7449,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 7449 "configure"
+#line 7453 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -7211,7 +7460,7 @@
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:7460: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7464: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -7236,7 +7485,7 @@
 
 
 echo $ac_n "checking for shl_unload in -ldld""... $ac_c" 1>&6
-echo "configure:7485: checking for shl_unload in -ldld" >&5
+echo "configure:7489: checking for shl_unload in -ldld" >&5
 ac_lib_var=`echo dld'_'shl_unload | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
@@ -7244,7 +7493,7 @@
   ac_save_LIBS="$LIBS"
 LIBS="-ldld  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 7493 "configure"
+#line 7497 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -7255,7 +7504,7 @@
 shl_unload()
 ; return 0; }
 EOF
-if { (eval echo configure:7504: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7508: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
@@ -7285,17 +7534,17 @@
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:7534: checking for $ac_hdr" >&5
+echo "configure:7538: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7539 "configure"
+#line 7543 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7544: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7548: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7367,12 +7616,12 @@
 for ac_func in socket fabsl strdup vsnprintf re_comp flock setenv unsetenv
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:7616: checking for $ac_func" >&5
+echo "configure:7620: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7621 "configure"
+#line 7625 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
@@ -7395,7 +7644,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:7644: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7648: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
@@ -7421,7 +7670,7 @@
  
 
 echo $ac_n "checking for getdomainname""... $ac_c" 1>&6
-echo "configure:7670: checking for getdomainname" >&5
+echo "configure:7674: checking for getdomainname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_getdomainname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7444,7 +7693,7 @@
 CXXFLAGS="$CXXFLAGS -pedantic-errors"
 fi
 cat > conftest.$ac_ext <<EOF
-#line 7693 "configure"
+#line 7697 "configure"
 #include "confdefs.h"
 
 #include <stdlib.h>
@@ -7457,7 +7706,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:7706: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:7710: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_func_getdomainname=yes
 else
@@ -7482,7 +7731,7 @@
 echo "$ac_t""$ac_cv_func_getdomainname" 1>&6
 
 echo $ac_n "checking if getdomainname needs custom prototype""... $ac_c" 1>&6
-echo "configure:7731: checking if getdomainname needs custom prototype" >&5
+echo "configure:7735: checking if getdomainname needs custom prototype" >&5
 if eval "test \"`echo '$''{'ac_cv_proto_getdomainname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7504,7 +7753,7 @@
   kde_safe_libs=$LIBS
   LIBS="$LIBS $X_EXTRA_LIBS"
   cat > conftest.$ac_ext <<EOF
-#line 7753 "configure"
+#line 7757 "configure"
 #include "confdefs.h"
 
 #include <stdlib.h>
@@ -7519,7 +7768,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:7768: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_getdomainname=yes
   ac_cv_proto_getdomainname=yes
@@ -7562,7 +7811,7 @@
 
 
 echo $ac_n "checking for gethostname""... $ac_c" 1>&6
-echo "configure:7811: checking for gethostname" >&5
+echo "configure:7815: checking for gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7583,7 +7832,7 @@
 CXXFLAGS="$CXXFLAGS -pedantic-errors"
 fi
 cat > conftest.$ac_ext <<EOF
-#line 7832 "configure"
+#line 7836 "configure"
 #include "confdefs.h"
 
 #include <stdlib.h>
@@ -7596,7 +7845,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:7845: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7849: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_gethostname=yes
 else
@@ -7620,7 +7869,7 @@
 echo "$ac_t""$ac_cv_func_gethostname" 1>&6
 
 echo $ac_n "checking if gethostname needs custom prototype""... $ac_c" 1>&6
-echo "configure:7869: checking if gethostname needs custom prototype" >&5
+echo "configure:7873: checking if gethostname needs custom prototype" >&5
 if eval "test \"`echo '$''{'ac_cv_proto_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
@@ -7640,7 +7889,7 @@
   ac_cv_proto_gethostname=no
 else
   cat > conftest.$ac_ext <<EOF
-#line 7889 "configure"
+#line 7893 "configure"
 #include "confdefs.h"
 
 #include <stdlib.h>
@@ -7655,7 +7904,7 @@
 
 ; return 0; }
 EOF
-if { (eval echo configure:7904: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:7908: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_cv_func_gethostname=yes
   ac_cv_proto_gethostname=yes
@@ -7705,17 +7954,17 @@
 
 ac_safe=`echo "sys/sockio.h" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for sys/sockio.h""... $ac_c" 1>&6
-echo "configure:7954: checking for sys/sockio.h" >&5
+echo "configure:7958: checking for sys/sockio.h" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 7959 "configure"
+#line 7963 "configure"
 #include "confdefs.h"
 #include <sys/sockio.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:7964: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:7968: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
@@ -7743,7 +7992,7 @@
 
 LIBSSL="-lssl -lcrypto"
 echo $ac_n "checking for OpenSSL""... $ac_c" 1>&6
-echo "configure:7992: checking for OpenSSL" >&5
+echo "configure:7996: checking for OpenSSL" >&5
 
 ac_ssl_includes=NO ac_ssl_libraries=NO
 ssl_libraries=""
@@ -7811,14 +8060,14 @@
 LIBS="$LIBS $LIBSSL -lRSAglue -lrsaref"
 
 cat > conftest.$ac_ext <<EOF
-#line 8060 "configure"
+#line 8064 "configure"
 #include "confdefs.h"
 
 int main() {
 void RSAPrivateEncrypt(void);RSAPrivateEncrypt();
 ; return 0; }
 EOF
-if { (eval echo configure:8067: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:8071: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   ac_ssl_rsaref="yes"
 
@@ -7843,7 +8092,8 @@
 cross_compiling=$ac_cv_prog_cc_cross
 
 if test "$ac_ssl_includes" = NO || test "$ac_ssl_libraries" = NO; then
-  { echo "configure: error: SSL checking failed" 1>&2; exit 1; }
+  have_ssl=no
+  LIBSSL="";
   else
   have_ssl=yes;
 fi
@@ -7869,7 +8119,7 @@
   ssl_includes="$ac_ssl_includes"
 
   echo $ac_n "checking whether OpenSSL uses rsaref""... $ac_c" 1>&6
-echo "configure:8119: checking whether OpenSSL uses rsaref" >&5
+echo "configure:8123: checking whether OpenSSL uses rsaref" >&5
   echo "$ac_t""$ac_ssl_rsaref" 1>&6
   if test "$ac_ssl_rsaref" = yes; then
     LIBSSL="-lssl -lcrypto -lRSAglue -lrsaref" 
@@ -7890,6 +8140,198 @@
 
 
 
+
+
+
+LIBPCSCLITE="";
+PCSCLITE_INCLUDES="";
+PCSCLITE_LDFLAGS="";
+
+# Check whether --enable-gsm_auth or --disable-gsm_auth was given.
+if test "${enable_gsm_auth+set}" = set; then
+  enableval="$enable_gsm_auth"
+  :
+fi
+
+if test -z "$enable_gsm_auth"; then
+    enable_gsm_auth=no
+fi
+
+if test "$enable_gsm_auth" = yes; then
+
+
+
+
+LIBPCSCLITE="-lpcsclite"
+echo $ac_n "checking for pcsc-lite""... $ac_c" 1>&6
+echo "configure:8168: checking for pcsc-lite" >&5
+
+ac_pcsclite_includes=NO ac_pcsclite_libraries=NO
+pcsclite_libraries=""
+pcsclite_includes=""
+# Check whether --with-pcsclite-dir or --without-pcsclite-dir was given.
+if test "${with_pcsclite_dir+set}" = set; then
+  withval="$with_pcsclite_dir"
+    ac_pcsclite_includes="$withval"/include
+       ac_pcsclite_libraries="$withval"/lib
+    
+fi
+
+
+if eval "test \"`echo '$''{'ac_cv_have_pcsclite'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  #try to guess pcsc-lite locations
+
+pcsclite_incdirs="/usr/include /usr/local/include"
+pcsclite_incdirs="$ac_pcsclite_includes $pcsclite_incdirs"
+
+pcsclite_incdir=NO
+for i in $pcsclite_incdirs;
+do
+  for j in winscard.h;
+  do
+    if test -r "$i/$j"; then
+      pcsclite_incdir=$i
+      break 2
+    fi
+  done
+done
+
+ac_pcsclite_includes="$pcsclite_incdir"
+
+pcsclite_libdirs="/usr/lib /usr/local/lib"
+if test ! "$ac_pcsclite_libraries" = "NO"; then
+  pcsclite_libdirs="$ac_pcsclite_libraries $pcsclite_libdirs"
+fi
+
+test=NONE
+pcsclite_libdir=NONE
+for dir in $pcsclite_libdirs; do
+  try="ls -1 $dir/libpcsclite*"
+  if test=`eval $try 2> /dev/null`; then pcsclite_libdir=$dir; break; else echo "tried $dir" >&5 ; fi
+done
+
+ac_pcsclite_libraries="$pcsclite_libdir"
+
+
+ac_ext=c
+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+cross_compiling=$ac_cv_prog_cc_cross
+
+
+ac_cflags_safe="$CFLAGS"
+ac_ldflags_safe="$LDFLAGS"
+ac_libs_safe="$LIBS"
+
+CFLAGS="$CFLAGS -I$pcsclite_incdir $pcsclite_includes"
+LDFLAGS="-L$pcsclite_libdir $all_libraries"
+LIBS="$LIBS $LIBPCSCLITE"
+
+ac_ext=c
+# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
+cross_compiling=$ac_cv_prog_cc_cross
+
+if test "$ac_pcsclite_includes" = NO || test "$ac_pcsclite_libraries" = NO; then
+  have_pcsclite=no
+  LIBPCSCLITE="";
+  echo "PCSC-Lite library not found: try without --enable-gsm_auth"
+  exit
+else
+  have_pcsclite=yes;
+fi
+
+
+fi
+
+
+eval "$ac_cv_have_pcsclite"
+
+if test "$have_pcsclite" != yes; then
+  echo "$ac_t""$have_pcsclite" 1>&6;
+else
+  # AC_DEFINE(WITH_GSM_AUTH, , [If we are going to use GSM authentication])
+  # CFLAGS="$CFLAGS -DWITH_GSM_AUTH"
+  CPPFLAGS="$CPPFLAGS -DWITH_GSM_AUTH"
+  ac_cv_have_pcsclite="have_pcsclite=yes \
+    ac_pcsclite_includes=$ac_pcsclite_includes \
+	ac_pcsclite_libraries=$ac_pcsclite_libraries"
+  echo "$ac_t""libraries $ac_pcsclite_libraries, headers $ac_pcsclite_includes" 1>&6
+  
+  pcsclite_libraries="$ac_pcsclite_libraries"
+  pcsclite_includes="$ac_pcsclite_includes"
+
+fi
+
+if test "$pcsclite_includes" = "/usr/include" || test  "$pcsclite_includes" = "/usr/local/include" || test -z "$pcsclite_includes"; then
+ PCSCLITE_INCLUDES="";
+else
+ PCSCLITE_INCLUDES="-I$pcsclite_includes"
+fi
+
+if test "$pcsclite_libraries" = "/usr/lib" || test "$pcsclite_libraries" = "/usr/local/lib" || test -z "$pcsclite_libraries"; then
+ PCSCLITE_LDFLAGS=""
+else
+ PCSCLITE_LDFLAGS="-L$pcsclite_libraries"
+fi
+
+
+
+
+
+
+fi
+
+
+for ac_hdr in linux/telephony.h linux/ixjuser.h
+do
+ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
+echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
+echo "configure:8297: checking for $ac_hdr" >&5
+if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 8302 "configure"
+#include "confdefs.h"
+#include <$ac_hdr>
+EOF
+ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
+{ (eval echo configure:8307: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
+if test -z "$ac_err"; then
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=yes"
+else
+  echo "$ac_err" >&5
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -rf conftest*
+  eval "ac_cv_header_$ac_safe=no"
+fi
+rm -f conftest*
+fi
+if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+  echo "$ac_t""yes" 1>&6
+    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`
+  cat >> confdefs.h <<EOF
+#define $ac_tr_hdr 1
+EOF
+ 
+else
+  echo "$ac_t""no" 1>&6
+fi
+done
+
+
+
+
 DO_NOT_COMPILE="$DO_NOT_COMPILE CVS debian bsd-port admin"
 
 if test ! -s $srcdir/subdirs; then
@@ -7909,7 +8351,7 @@
 
 for i in $ac_topsubdirs; do
   echo $ac_n "checking if $i should be compiled""... $ac_c" 1>&6
-echo "configure:8206: checking if $i should be compiled" >&5
+echo "configure:8355: checking if $i should be compiled" >&5
   if test -d $srcdir/$i; then
     install_it="yes"
     for j in $DO_NOT_COMPILE; do
@@ -8033,8 +8475,8 @@
 ./Makefile \
 dissipate2/Makefile \
 ilbc/Makefile \
-kphonegsm/Makefile \
 kphone/Makefile \
+kphonegsm/Makefile \
  config.h" | sed "s/:[^ ]*//g"` conftest*; exit 1' 1 2 15
 EOF
 cat >> $CONFIG_STATUS <<EOF
@@ -8194,6 +8636,9 @@
 s%@SSL_INCLUDES@%$SSL_INCLUDES%g
 s%@SSL_LDFLAGS@%$SSL_LDFLAGS%g
 s%@LIBSSL@%$LIBSSL%g
+s%@PCSCLITE_INCLUDES@%$PCSCLITE_INCLUDES%g
+s%@PCSCLITE_LDFLAGS@%$PCSCLITE_LDFLAGS%g
+s%@LIBPCSCLITE@%$LIBPCSCLITE%g
 s%@TOPSUBDIRS@%$TOPSUBDIRS%g
 
 CEOF
@@ -8240,8 +8685,8 @@
 ./Makefile \
 dissipate2/Makefile \
 ilbc/Makefile \
-kphonegsm/Makefile \
 kphone/Makefile \
+kphonegsm/Makefile \
 "}
 EOF
 cat >> $CONFIG_STATUS <<\EOF
diff -r -N -u kphone-3.11/configure.in kphone-3.11-gsm/configure.in
--- kphone-3.11/configure.in	Wed Jan 22 10:45:29 2003
+++ kphone-3.11-gsm/configure.in	Mon Aug  4 16:32:26 2003
@@ -1,6 +1,8 @@
 # Original Author was Kalle@kde.org
 # I lifted it in some mater. (Stephan Kulow)
 # I used much code from Janos Farkas
+# I added support for PCSC-Lite library searching used
+#   for GSM authentication support (Daniel Mierla)
 
 dnl Process this file with autoconf to produce a configure script.
 
@@ -13,7 +15,7 @@
 AC_ARG_PROGRAM
 
 dnl Automake doc recommends to do this only here. (Janos)
-AM_INIT_AUTOMAKE(kphone-1.1, "2.2alpha1") dnl searches for some needed programs
+AM_INIT_AUTOMAKE(kphone-3.11, "2.2alpha1") dnl searches for some needed programs
 
 KDE_SET_PREFIX
 
@@ -181,6 +183,121 @@
 
 AC_PATH_SSL
 
+LIBPCSCLITE="";
+PCSCLITE_INCLUDES="";
+PCSCLITE_LDFLAGS="";
+
+AC_ARG_ENABLE(gsm_auth, [  --enable-gsm_auth    enable GSM authentication (default is NO)])
+if test -z "$enable_gsm_auth"; then
+    enable_gsm_auth=no
+fi
+
+if test "$enable_gsm_auth" = yes; then
+
+dnl ------------------------------------------------------------------------
+dnl Try to find the PCSC-LITE headers and libraries.
+dnl $(PCSCLITE_LDFLAGS) will be -Lpcscliteliblocation (if needed)
+dnl and $(PCSCLITE_INCLUDES) will be -Ipcsclitehdrlocation (if needed)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN(AC_PATH_PCSCLITE,
+[
+LIBPCSCLITE="-lpcsclite"
+AC_MSG_CHECKING([for pcsc-lite])
+
+ac_pcsclite_includes=NO ac_pcsclite_libraries=NO
+pcsclite_libraries=""
+pcsclite_includes=""
+AC_ARG_WITH(pcsclite-dir,
+    [  --with-pcsclite-dir=DIR       where the root of pcsc-lite is installed ],
+    [  ac_pcsclite_includes="$withval"/include
+       ac_pcsclite_libraries="$withval"/lib
+    ])
+
+AC_CACHE_VAL(ac_cv_have_pcsclite,
+[#try to guess pcsc-lite locations
+
+pcsclite_incdirs="/usr/include /usr/local/include"
+pcsclite_incdirs="$ac_pcsclite_includes $pcsclite_incdirs"
+AC_FIND_FILE(winscard.h, $pcsclite_incdirs, pcsclite_incdir)
+ac_pcsclite_includes="$pcsclite_incdir"
+
+pcsclite_libdirs="/usr/lib /usr/local/lib"
+if test ! "$ac_pcsclite_libraries" = "NO"; then
+  pcsclite_libdirs="$ac_pcsclite_libraries $pcsclite_libdirs"
+fi
+
+test=NONE
+pcsclite_libdir=NONE
+for dir in $pcsclite_libdirs; do
+  try="ls -1 $dir/libpcsclite*"
+  if test=`eval $try 2> /dev/null`; then pcsclite_libdir=$dir; break; else echo "tried $dir" >&AC_FD_CC ; fi
+done
+
+ac_pcsclite_libraries="$pcsclite_libdir"
+
+AC_LANG_SAVE
+AC_LANG_C
+
+ac_cflags_safe="$CFLAGS"
+ac_ldflags_safe="$LDFLAGS"
+ac_libs_safe="$LIBS"
+
+CFLAGS="$CFLAGS -I$pcsclite_incdir $pcsclite_includes"
+LDFLAGS="-L$pcsclite_libdir $all_libraries"
+LIBS="$LIBS $LIBPCSCLITE"
+
+AC_LANG_RESTORE
+if test "$ac_pcsclite_includes" = NO || test "$ac_pcsclite_libraries" = NO; then
+  have_pcsclite=no
+  LIBPCSCLITE="";
+  echo "PCSC-Lite library not found: try without --enable-gsm_auth"
+  exit
+else
+  have_pcsclite=yes;
+fi
+
+])
+
+eval "$ac_cv_have_pcsclite"
+
+if test "$have_pcsclite" != yes; then
+  AC_MSG_RESULT([$have_pcsclite]);
+else
+  # AC_DEFINE(WITH_GSM_AUTH, , [If we are going to use GSM authentication])
+  # CFLAGS="$CFLAGS -DWITH_GSM_AUTH"
+  CPPFLAGS="$CPPFLAGS -DWITH_GSM_AUTH"
+  ac_cv_have_pcsclite="have_pcsclite=yes \
+    ac_pcsclite_includes=$ac_pcsclite_includes \
+	ac_pcsclite_libraries=$ac_pcsclite_libraries"
+  AC_MSG_RESULT([libraries $ac_pcsclite_libraries, headers $ac_pcsclite_includes])
+  
+  pcsclite_libraries="$ac_pcsclite_libraries"
+  pcsclite_includes="$ac_pcsclite_includes"
+
+fi
+
+if test "$pcsclite_includes" = "/usr/include" || test  "$pcsclite_includes" = "/usr/local/include" || test -z "$pcsclite_includes"; then
+ PCSCLITE_INCLUDES="";
+else
+ PCSCLITE_INCLUDES="-I$pcsclite_includes"
+fi
+
+if test "$pcsclite_libraries" = "/usr/lib" || test "$pcsclite_libraries" = "/usr/local/lib" || test -z "$pcsclite_libraries"; then
+ PCSCLITE_LDFLAGS=""
+else
+ PCSCLITE_LDFLAGS="-L$pcsclite_libraries"
+fi
+
+AC_SUBST(PCSCLITE_INCLUDES)
+AC_SUBST(PCSCLITE_LDFLAGS)
+AC_SUBST(LIBPCSCLITE)
+])
+
+AC_PATH_PCSCLITE
+
+fi
+
 dnl kphone configure checks
 
 dnl For the quicknet cards
@@ -191,6 +308,6 @@
 ./Makefile \
 dissipate2/Makefile \
 ilbc/Makefile \
-kphonegsm/Makefile \
 kphone/Makefile \
+kphonegsm/Makefile \
 )
diff -r -N -u kphone-3.11/configure.in.old kphone-3.11-gsm/configure.in.old
--- kphone-3.11/configure.in.old	Thu Jan  1 01:00:00 1970
+++ kphone-3.11-gsm/configure.in.old	Wed Jan 22 10:45:29 2003
@@ -0,0 +1,196 @@
+# Original Author was Kalle@kde.org
+# I lifted it in some mater. (Stephan Kulow)
+# I used much code from Janos Farkas
+
+dnl Process this file with autoconf to produce a configure script.
+
+AC_INIT(acinclude.m4) dnl a source file from your sub dir
+
+dnl This is so we can use kde-common
+AC_CONFIG_AUX_DIR(admin)
+
+AC_CANONICAL_SYSTEM 
+AC_ARG_PROGRAM
+
+dnl Automake doc recommends to do this only here. (Janos)
+AM_INIT_AUTOMAKE(kphone-1.1, "2.2alpha1") dnl searches for some needed programs
+
+KDE_SET_PREFIX
+
+dnl generate the config header
+AM_CONFIG_HEADER(config.h) dnl at the distribution this done
+
+dnl Checks for programs.
+AC_CHECK_COMPILERS
+AC_ENABLE_SHARED(yes)
+AC_ENABLE_STATIC(no)
+KDE_PROG_LIBTOOL
+
+dnl for NLS support. Call them in this order!
+dnl WITH_NLS is for the po files
+AM_KDE_WITH_NLS
+
+AC_PATH_KDE
+
+dnl Perform program name transformation
+AC_ARG_PROGRAM
+
+#MIN_CONFIG
+# Define a symbol, to know that we're compiling WITH kde. (for apps that
+#  can compile without KDE, optionally)
+AM_CONDITIONAL(KDE_INSTALLED, test "$have_kde" = "yes")
+
+dnl Checks for header files.
+AC_HEADER_DIRENT
+AC_HEADER_STDC
+AC_CHECK_HEADERS(fcntl.h sys/time.h sys/stat.h)
+AC_CHECK_HEADERS(sys/cdefs.h fnmatch.h sysent.h strings.h paths.h)
+AC_CHECK_HEADERS(utmp.h sys/param.h linux/tcp.h sys/proc.h)
+
+dnl Checks for typedefs, structures, and compiler characteristics.
+AC_HEADER_TIME
+
+AC_C_LONG_DOUBLE  
+
+dnl Checks for library functions.
+KDE_CHECK_DLOPEN
+AC_CHECK_FUNCS(socket fabsl strdup vsnprintf re_comp flock setenv unsetenv) 
+AC_CHECK_GETDOMAINNAME
+AC_CHECK_GETHOSTNAME 
+KDE_CHECK_NEWLIBS
+
+LIB_KHTMLW="-lkhtmlw"
+AC_SUBST(LIB_KHTMLW)
+
+DO_NOT_COMPILE="$DO_NOT_COMPILE perlconfthing lnk"
+
+
+dnl This is for Solaris
+AC_CHECK_HEADER(sys/sockio.h)
+
+dnl ------------------------------------------------------------------------
+dnl Try to find the SSL headers and libraries.
+dnl $(SSL_LDFLAGS) will be -Lsslliblocation (if needed)
+dnl and $(SSL_INCLUDES) will be -Isslhdrlocation (if needed)
+dnl ------------------------------------------------------------------------
+dnl
+AC_DEFUN(AC_PATH_SSL,
+[
+LIBSSL="-lssl -lcrypto"
+AC_MSG_CHECKING([for OpenSSL])
+
+ac_ssl_includes=NO ac_ssl_libraries=NO
+ssl_libraries=""
+ssl_includes=""
+AC_ARG_WITH(ssl-dir,
+    [  --with-ssl-dir=DIR       where the root of OpenSSL is installed ],
+    [  ac_ssl_includes="$withval"/include
+       ac_ssl_libraries="$withval"/lib
+    ])
+
+AC_CACHE_VAL(ac_cv_have_ssl,
+[#try to guess OpenSSL locations
+
+ssl_incdirs="/usr/include /usr/local/include /usr/ssl/include /usr/local/ssl/include"
+ssl_incdirs="$ac_ssl_includes $ssl_incdirs"
+AC_FIND_FILE(openssl/ssl.h, $ssl_incdirs, ssl_incdir)
+ac_ssl_includes="$ssl_incdir"
+
+ssl_libdirs="/usr/lib /usr/local/lib /usr/ssl/lib /usr/local/ssl/lib"
+if test ! "$ac_ssl_libraries" = "NO"; then
+  ssl_libdirs="$ac_ssl_libraries $ssl_libdirs"
+fi
+
+test=NONE
+ssl_libdir=NONE
+for dir in $ssl_libdirs; do
+  try="ls -1 $dir/libssl*"
+  if test=`eval $try 2> /dev/null`; then ssl_libdir=$dir; break; else echo "tried $dir" >&AC_FD_CC ; fi
+done
+
+ac_ssl_libraries="$ssl_libdir"
+
+AC_LANG_SAVE
+AC_LANG_C
+
+ac_cflags_safe="$CFLAGS"
+ac_ldflags_safe="$LDFLAGS"
+ac_libs_safe="$LIBS"
+
+CFLAGS="$CFLAGS -I$ssl_incdir $all_includes"
+LDFLAGS="-L$ssl_libdir $all_libraries"
+LIBS="$LIBS $LIBSSL -lRSAglue -lrsaref"
+
+AC_TRY_LINK(,void RSAPrivateEncrypt(void);RSAPrivateEncrypt();,
+ac_ssl_rsaref="yes"
+,
+ac_ssl_rsaref="no"
+)
+
+CFLAGS="$ac_cflags_safe"
+LDFLAGS="$ac_ldflags_safe"
+LIBS="$ac_libs_safe"
+
+AC_LANG_RESTORE
+if test "$ac_ssl_includes" = NO || test "$ac_ssl_libraries" = NO; then
+  have_ssl=no
+  LIBSSL="";
+  else
+  have_ssl=yes;
+fi
+
+])
+
+eval "$ac_cv_have_ssl"
+
+if test "$have_ssl" != yes; then
+  AC_MSG_RESULT([$have_ssl]);
+else
+  AC_DEFINE(HAVE_SSL, 1, [If we are going to use OpenSSL])
+  ac_cv_have_ssl="have_ssl=yes \
+    ac_ssl_includes=$ac_ssl_includes ac_ssl_libraries=$ac_ssl_libraries ac_ssl_rsaref=$ac_ssl_rsaref"
+  AC_MSG_RESULT([libraries $ac_ssl_libraries, headers $ac_ssl_includes])
+  
+  ssl_libraries="$ac_ssl_libraries"
+  ssl_includes="$ac_ssl_includes"
+
+  AC_MSG_CHECKING([whether OpenSSL uses rsaref])
+  AC_MSG_RESULT($ac_ssl_rsaref)
+  if test "$ac_ssl_rsaref" = yes; then
+    LIBSSL="-lssl -lcrypto -lRSAglue -lrsaref" 
+  fi
+fi
+
+if test "$ssl_includes" = "/usr/include" || test  "$ssl_includes" = "/usr/local/include" || test -z "$ssl_includes"; then
+ SSL_INCLUDES="";
+else
+ SSL_INCLUDES="-I$ssl_includes"
+fi
+
+if test "$ssl_libraries" = "/usr/lib" || test "$ssl_libraries" = "/usr/local/lib" || test -z "$ssl_libraries"; then
+ SSL_LDFLAGS=""
+else
+ SSL_LDFLAGS="-L$ssl_libraries"
+fi
+
+AC_SUBST(SSL_INCLUDES)
+AC_SUBST(SSL_LDFLAGS)
+AC_SUBST(LIBSSL)
+])
+
+
+AC_PATH_SSL
+
+dnl kphone configure checks
+
+dnl For the quicknet cards
+AC_CHECK_HEADERS(linux/telephony.h linux/ixjuser.h)
+
+KDE_CREATE_SUBDIRSLIST
+AC_OUTPUT( \
+./Makefile \
+dissipate2/Makefile \
+ilbc/Makefile \
+kphonegsm/Makefile \
+kphone/Makefile \
+)
diff -r -N -u kphone-3.11/dissipate2/Makefile.am kphone-3.11-gsm/dissipate2/Makefile.am
--- kphone-3.11/dissipate2/Makefile.am	Mon Sep  9 11:31:12 2002
+++ kphone-3.11-gsm/dissipate2/Makefile.am	Mon Aug  4 15:22:44 2003
@@ -17,7 +17,7 @@
 #    the Free Software Foundation, Inc., 59 Temple Place - Suite 330,
 #    Boston, MA 02111-1307, USA.
 
-INCLUDES= $(all_includes) -I$(srcdir)/.. $(SSL_INCLUDES)
+INCLUDES= $(all_includes) -I$(srcdir)/.. $(SSL_INCLUDES) $(PCSCLITE_INCLUDES)
 
 lib_LTLIBRARIES = libdissipate2.la
 
@@ -26,17 +26,17 @@
 	sipuri.cpp sipvia.cpp mimecontenttype.cpp tcpmessagesocket.cpp \
 	sdp.cpp udpmessagesocket.cpp siptransaction.cpp sipregister.cpp \
 	siputil.cpp sipprotocol.cpp sipuser.cpp parameterlist.cpp \
-	sipvialist.cpp sipurilist.cpp extern_md5.c base64.c
+	sipvialist.cpp sipurilist.cpp extern_md5.c base64.c gsmauth.cpp
 
 myincludedir = $(includedir)/dissipate2
 myinclude_HEADERS = generaluri.h headerparser.h messagesocket.h \
 	mimecontenttype.h sipcall.h sipclient.h sipheader.h sipmessage.h \
 	sipuser.h sdp.h sipregister.h sipstatus.h siptransaction.h sipuri.h \
 	sipvia.h tcpmessagesocket.h udpmessagesocket.h sipvialist.h \
-	sipprotocol.h parameterlist.h sipurilist.h
+	sipprotocol.h parameterlist.h sipurilist.h gsmauth.h
 
-libdissipate2_la_LDFLAGS = $(all_libraries) $(SSL_LDFLAGS)
-libdissipate2_la_LIBADD  = $(LIBSSL)
+libdissipate2_la_LDFLAGS = $(all_libraries) $(SSL_LDFLAGS) $(PCSCLITE_LDFLAGS)
+libdissipate2_la_LIBADD  = $(LIBSSL) $(LIBPCSCLITE)
 
 libdissipate2_la_METASOURCES = USE_AUTOMOC
 
diff -r -N -u kphone-3.11/dissipate2/Makefile.in kphone-3.11-gsm/dissipate2/Makefile.in
--- kphone-3.11/dissipate2/Makefile.in	Wed Jan 22 10:46:04 2003
+++ kphone-3.11-gsm/dissipate2/Makefile.in	Mon Aug  4 20:54:24 2003
@@ -127,6 +127,7 @@
 LIBJPEG = @LIBJPEG@
 LIBMICO = @LIBMICO@
 LIBOBJS = @LIBOBJS@
+LIBPCSCLITE = @LIBPCSCLITE@
 LIBPNG = @LIBPNG@
 LIBPTHREAD = @LIBPTHREAD@
 LIBPYTHON = @LIBPYTHON@
@@ -170,6 +171,8 @@
 PAMINC = @PAMINC@
 PAMLIBPATHS = @PAMLIBPATHS@
 PAMLIBS = @PAMLIBS@
+PCSCLITE_INCLUDES = @PCSCLITE_INCLUDES@
+PCSCLITE_LDFLAGS = @PCSCLITE_LDFLAGS@
 PYTHONINC = @PYTHONINC@
 PYTHONLIB = @PYTHONLIB@
 PYTHONMODDIR = @PYTHONMODDIR@
@@ -222,7 +225,7 @@
 x_includes = @x_includes@
 x_libraries = @x_libraries@
 
-INCLUDES = $(all_includes) -I$(srcdir)/.. $(SSL_INCLUDES)
+INCLUDES = $(all_includes) -I$(srcdir)/.. $(SSL_INCLUDES) $(PCSCLITE_INCLUDES)
 
 lib_LTLIBRARIES = libdissipate2.la
 
@@ -231,7 +234,7 @@
 	sipuri.cpp sipvia.cpp mimecontenttype.cpp tcpmessagesocket.cpp \
 	sdp.cpp udpmessagesocket.cpp siptransaction.cpp sipregister.cpp \
 	siputil.cpp sipprotocol.cpp sipuser.cpp parameterlist.cpp \
-	sipvialist.cpp sipurilist.cpp extern_md5.c base64.c
+	sipvialist.cpp sipurilist.cpp extern_md5.c base64.c gsmauth.cpp
 
 
 myincludedir = $(includedir)/dissipate2
@@ -239,11 +242,11 @@
 	mimecontenttype.h sipcall.h sipclient.h sipheader.h sipmessage.h \
 	sipuser.h sdp.h sipregister.h sipstatus.h siptransaction.h sipuri.h \
 	sipvia.h tcpmessagesocket.h udpmessagesocket.h sipvialist.h \
-	sipprotocol.h parameterlist.h sipurilist.h
+	sipprotocol.h parameterlist.h sipurilist.h gsmauth.h
 
 
-libdissipate2_la_LDFLAGS = $(all_libraries) $(SSL_LDFLAGS)
-libdissipate2_la_LIBADD = $(LIBSSL)
+libdissipate2_la_LDFLAGS = $(all_libraries) $(SSL_LDFLAGS) $(PCSCLITE_LDFLAGS)
+libdissipate2_la_LIBADD = $(LIBSSL) $(LIBPCSCLITE)
 
 #>- libdissipate2_la_METASOURCES = USE_AUTOMOC
 
@@ -266,7 +269,7 @@
 #>- sipstatus.lo sipuri.lo sipvia.lo mimecontenttype.lo tcpmessagesocket.lo \
 #>- sdp.lo udpmessagesocket.lo siptransaction.lo sipregister.lo siputil.lo \
 #>- sipprotocol.lo sipuser.lo parameterlist.lo sipvialist.lo sipurilist.lo \
-#>- extern_md5.lo base64.lo
+#>- extern_md5.lo base64.lo gsmauth.lo
 #>+ 10
 libdissipate2_la_final_OBJECTS = libdissipate2_la.all_cpp.lo extern_md5.lo base64.lo 
 libdissipate2_la_nofinal_OBJECTS = generaluri.lo headerparser.lo \
@@ -274,7 +277,7 @@
 sipstatus.lo sipuri.lo sipvia.lo mimecontenttype.lo tcpmessagesocket.lo \
 sdp.lo udpmessagesocket.lo siptransaction.lo sipregister.lo siputil.lo \
 sipprotocol.lo sipuser.lo parameterlist.lo sipvialist.lo sipurilist.lo \
-extern_md5.lo base64.lo \
+extern_md5.lo base64.lo gsmauth.lo \
 libdissipate2_la_meta_unload.lo 
 @KDE_USE_FINAL_FALSE@libdissipate2_la_OBJECTS = $(libdissipate2_la_nofinal_OBJECTS)
 @KDE_USE_FINAL_TRUE@libdissipate2_la_OBJECTS = $(libdissipate2_la_final_OBJECTS)
@@ -301,7 +304,7 @@
 
 #>- DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 4
-KDE_DIST=configure.in.in siputil.h libdissipate2_la_meta_unload.cpp dissipate2.kdevses base64.h dissipate2.kdevprj extern_md5.h 
+KDE_DIST=configure.in.in siputil.h base64.h extern_md5.h 
 
 DISTFILES= $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
 
@@ -309,31 +312,31 @@
 TAR = gtar
 GZIP_ENV = --best
 #>- DEP_FILES =  .deps/base64.P .deps/extern_md5.P .deps/generaluri.P \
-#>- .deps/headerparser.P .deps/messagesocket.P .deps/mimecontenttype.P \
-#>- .deps/parameterlist.P .deps/sdp.P .deps/sipcall.P .deps/sipclient.P \
-#>- .deps/sipheader.P .deps/sipmessage.P .deps/sipprotocol.P \
-#>- .deps/sipregister.P .deps/sipstatus.P .deps/siptransaction.P \
-#>- .deps/sipuri.P .deps/sipurilist.P .deps/sipuser.P .deps/siputil.P \
-#>- .deps/sipvia.P .deps/sipvialist.P .deps/tcpmessagesocket.P \
-#>- .deps/udpmessagesocket.P
+#>- .deps/gsmauth.P .deps/headerparser.P .deps/messagesocket.P \
+#>- .deps/mimecontenttype.P .deps/parameterlist.P .deps/sdp.P \
+#>- .deps/sipcall.P .deps/sipclient.P .deps/sipheader.P .deps/sipmessage.P \
+#>- .deps/sipprotocol.P .deps/sipregister.P .deps/sipstatus.P \
+#>- .deps/siptransaction.P .deps/sipuri.P .deps/sipurilist.P \
+#>- .deps/sipuser.P .deps/siputil.P .deps/sipvia.P .deps/sipvialist.P \
+#>- .deps/tcpmessagesocket.P .deps/udpmessagesocket.P
 #>+ 18
 @KDE_USE_FINAL_TRUE@DEP_FILES =  $(DEPDIR)/libdissipate2_la_meta_unload.P  $(DEPDIR)/libdissipate2_la.all_cpp.P \
 	  .deps/base64.P .deps/extern_md5.P .deps/generaluri.P \
-.deps/headerparser.P .deps/messagesocket.P .deps/mimecontenttype.P \
-.deps/parameterlist.P .deps/sdp.P .deps/sipcall.P .deps/sipclient.P \
-.deps/sipheader.P .deps/sipmessage.P .deps/sipprotocol.P \
-.deps/sipregister.P .deps/sipstatus.P .deps/siptransaction.P \
-.deps/sipuri.P .deps/sipurilist.P .deps/sipuser.P .deps/siputil.P \
-.deps/sipvia.P .deps/sipvialist.P .deps/tcpmessagesocket.P \
-.deps/udpmessagesocket.P
+.deps/gsmauth.P .deps/headerparser.P .deps/messagesocket.P \
+.deps/mimecontenttype.P .deps/parameterlist.P .deps/sdp.P \
+.deps/sipcall.P .deps/sipclient.P .deps/sipheader.P .deps/sipmessage.P \
+.deps/sipprotocol.P .deps/sipregister.P .deps/sipstatus.P \
+.deps/siptransaction.P .deps/sipuri.P .deps/sipurilist.P \
+.deps/sipuser.P .deps/siputil.P .deps/sipvia.P .deps/sipvialist.P \
+.deps/tcpmessagesocket.P .deps/udpmessagesocket.P
 @KDE_USE_FINAL_FALSE@DEP_FILES =  $(DEPDIR)/libdissipate2_la_meta_unload.P   .deps/base64.P .deps/extern_md5.P .deps/generaluri.P \
-.deps/headerparser.P .deps/messagesocket.P .deps/mimecontenttype.P \
-.deps/parameterlist.P .deps/sdp.P .deps/sipcall.P .deps/sipclient.P \
-.deps/sipheader.P .deps/sipmessage.P .deps/sipprotocol.P \
-.deps/sipregister.P .deps/sipstatus.P .deps/siptransaction.P \
-.deps/sipuri.P .deps/sipurilist.P .deps/sipuser.P .deps/siputil.P \
-.deps/sipvia.P .deps/sipvialist.P .deps/tcpmessagesocket.P \
-.deps/udpmessagesocket.P
+.deps/gsmauth.P .deps/headerparser.P .deps/messagesocket.P \
+.deps/mimecontenttype.P .deps/parameterlist.P .deps/sdp.P \
+.deps/sipcall.P .deps/sipclient.P .deps/sipheader.P .deps/sipmessage.P \
+.deps/sipprotocol.P .deps/sipregister.P .deps/sipstatus.P \
+.deps/siptransaction.P .deps/sipuri.P .deps/sipurilist.P \
+.deps/sipuser.P .deps/siputil.P .deps/sipvia.P .deps/sipvialist.P \
+.deps/tcpmessagesocket.P .deps/udpmessagesocket.P
 
 SOURCES = $(libdissipate2_la_SOURCES)
 OBJECTS = $(libdissipate2_la_OBJECTS)
@@ -680,11 +683,11 @@
 	-rm -f  libdissipate2_la_meta_unload.cpp
 
 #>+ 11
-libdissipate2_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/generaluri.cpp $(srcdir)/headerparser.cpp $(srcdir)/messagesocket.cpp $(srcdir)/sipcall.cpp $(srcdir)/sipclient.cpp $(srcdir)/sipheader.cpp $(srcdir)/sipmessage.cpp $(srcdir)/sipstatus.cpp $(srcdir)/sipuri.cpp $(srcdir)/sipvia.cpp $(srcdir)/mimecontenttype.cpp $(srcdir)/tcpmessagesocket.cpp $(srcdir)/sdp.cpp $(srcdir)/udpmessagesocket.cpp $(srcdir)/siptransaction.cpp $(srcdir)/sipregister.cpp $(srcdir)/siputil.cpp $(srcdir)/sipprotocol.cpp $(srcdir)/sipuser.cpp $(srcdir)/parameterlist.cpp $(srcdir)/sipvialist.cpp $(srcdir)/sipurilist.cpp $(srcdir)/libdissipate2_la_meta_unload.cpp   siptransaction.moc sipclient.moc sipcall.moc sipregister.moc 
+libdissipate2_la.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/generaluri.cpp $(srcdir)/headerparser.cpp $(srcdir)/messagesocket.cpp $(srcdir)/sipcall.cpp $(srcdir)/sipclient.cpp $(srcdir)/sipheader.cpp $(srcdir)/sipmessage.cpp $(srcdir)/sipstatus.cpp $(srcdir)/sipuri.cpp $(srcdir)/sipvia.cpp $(srcdir)/mimecontenttype.cpp $(srcdir)/tcpmessagesocket.cpp $(srcdir)/sdp.cpp $(srcdir)/udpmessagesocket.cpp $(srcdir)/siptransaction.cpp $(srcdir)/sipregister.cpp $(srcdir)/siputil.cpp $(srcdir)/sipprotocol.cpp $(srcdir)/sipuser.cpp $(srcdir)/parameterlist.cpp $(srcdir)/sipvialist.cpp $(srcdir)/sipurilist.cpp $(srcdir)/gsmauth.cpp libdissipate2_la_meta_unload.cpp   siptransaction.moc sipclient.moc sipcall.moc sipregister.moc 
 	@echo 'creating libdissipate2_la.all_cpp.cpp ...'; \
 	rm -f libdissipate2_la.all_cpp.files libdissipate2_la.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> libdissipate2_la.all_cpp.final; \
-	for file in generaluri.cpp headerparser.cpp messagesocket.cpp sipcall.cpp sipclient.cpp sipheader.cpp sipmessage.cpp sipstatus.cpp sipuri.cpp sipvia.cpp mimecontenttype.cpp tcpmessagesocket.cpp sdp.cpp udpmessagesocket.cpp siptransaction.cpp sipregister.cpp siputil.cpp sipprotocol.cpp sipuser.cpp parameterlist.cpp sipvialist.cpp sipurilist.cpp libdissipate2_la_meta_unload.cpp ; do \
+	for file in generaluri.cpp headerparser.cpp messagesocket.cpp sipcall.cpp sipclient.cpp sipheader.cpp sipmessage.cpp sipstatus.cpp sipuri.cpp sipvia.cpp mimecontenttype.cpp tcpmessagesocket.cpp sdp.cpp udpmessagesocket.cpp siptransaction.cpp sipregister.cpp siputil.cpp sipprotocol.cpp sipuser.cpp parameterlist.cpp sipvialist.cpp sipurilist.cpp gsmauth.cpp libdissipate2_la_meta_unload.cpp ; do \
 	  echo "#include \"$$file\"" >> libdissipate2_la.all_cpp.files; \
 	  test ! -f $(srcdir)/$$file || egrep '^#pragma +implementation' $(srcdir)/$$file >> libdissipate2_la.all_cpp.final; \
 	done; \
diff -r -N -u kphone-3.11/dissipate2/gsmauth.cpp kphone-3.11-gsm/dissipate2/gsmauth.cpp
--- kphone-3.11/dissipate2/gsmauth.cpp	Thu Jan  1 01:00:00 1970
+++ kphone-3.11-gsm/dissipate2/gsmauth.cpp	Fri Aug  1 21:35:23 2003
@@ -0,0 +1,497 @@
+
+#ifdef WITH_GSM_AUTH
+
+#include <config.h>
+
+#include <stdio.h>
+#include <stdlib.h>
+#include <unistd.h>
+#include <ctype.h>
+#include <string.h>
+#include <gsmauth.h>
+
+#define MAXBUFF 512
+#define hi(x) fac[(((x) >> 4) & 0x0f)]
+#define lo(x) fac[((x) & 0x0f)]
+
+/* explanatory texts */
+static const char *filetype[] = { "RFU","MF","DF","invalid","EF" };
+static const char *filestruct[] = { "transparent","linear fixed","invalid","cyclic" };
+static const char *fac[] = { "ALW","CHV1","CHV2", "RFU","ADM","ADM","ADM","ADM","ADM","ADM",
+		"ADM","ADM","ADM","ADM","ADM","NEV" };
+
+static const t_response C_response[]=
+	{
+		{ { 0xff, 0xff }, { 0x90, 0x00 } , "Ok" },
+
+		{ { 0xff, 0x00 }, { 0x61, 0x00 } , "%d response bytes available" },
+		{ { 0xff, 0x00 }, { 0x9f, 0x00 } , "%d response bytes available" },
+
+		{ { 0xff, 0xff }, { 0x62, 0x81 } , "returned data may be corrupt" },
+		{ { 0xff, 0xff }, { 0x62, 0x82 } , "EOF reached prematurely" },
+		{ { 0xff, 0xff }, { 0x62, 0x83 } , "selected file invalid" },
+		{ { 0xff, 0xff }, { 0x62, 0x84 } , "FCI not formated" },
+		{ { 0xff, 0x00 }, { 0x62, 0x00 } , "nvmem unchanged" },
+
+		{ { 0xff, 0x00 }, { 0x63, 0x00 } , "nvmem changed" },
+		{ { 0xff, 0x00 }, { 0x63, 0x81 } , "file filled up by last write" },
+		{ { 0xff, 0xf0 }, { 0x63, 0xc0 } , "Counter=%1.1X" },
+
+		{ { 0xff, 0xff }, { 0x64, 0x00 } , "nvmem unchanged" },
+		{ { 0xff, 0x00 }, { 0x64, 0x00 } , "nvmem unchanged - RFU" },
+
+		{ { 0xff, 0xff }, { 0x65, 0x00 } , "nvmem changed" },
+		{ { 0xff, 0xff }, { 0x65, 0x81 } , "nvmem changed - memory failure" },
+		{ { 0xff, 0x00 }, { 0x65, 0x00 } , "nvmem changed - unknown?" },
+
+		{ { 0xff, 0x00 }, { 0x66, 0x00 } , "security related %d" },
+
+		{ { 0xff, 0xff }, { 0x67, 0x00 } , "wrong length" },
+		{ { 0xff, 0x00 }, { 0x67, 0x00 } , "wrong length - %d expected" },
+
+		{ { 0xff, 0xff }, { 0x68, 0x81 } , "wrong cla - logical channel not supported" },
+		{ { 0xff, 0xff }, { 0x68, 0x82 } , "wrong cla - secure messaging not supported" },
+		{ { 0xff, 0x00 }, { 0x68, 0x00 } , "cla not supported" },
+
+		{ { 0xff, 0xff }, { 0x69, 0x81 } , "command incompatible with file structure" },
+		{ { 0xff, 0xff }, { 0x69, 0x82 } , "security status not satisfied" },
+		{ { 0xff, 0xff }, { 0x69, 0x83 } , "authentication method blocked" },
+		{ { 0xff, 0xff }, { 0x69, 0x84 } , "referenced data invalid" },
+		{ { 0xff, 0xff }, { 0x69, 0x85 } , "conditions of use not satisfied" },
+		{ { 0xff, 0xff }, { 0x69, 0x86 } , "command not allowed - no current EF" },
+		{ { 0xff, 0xff }, { 0x69, 0x87 } , "expected SM data objects missing" },
+		{ { 0xff, 0xff }, { 0x69, 0x88 } , "SM data objects incorrect" },
+		{ { 0xff, 0x00 }, { 0x69, 0x00 } , "command not allowed" },
+
+		{ { 0xff, 0xff }, { 0x6a, 0x80 } , "P1-P2: incorrect parameters in data field" },
+		{ { 0xff, 0xff }, { 0x6a, 0x81 } , "P1-P2: function not supported" },
+		{ { 0xff, 0xff }, { 0x6a, 0x82 } , "P1-P2: file not found" },
+		{ { 0xff, 0xff }, { 0x6a, 0x83 } , "P1-P2: record not found" },
+		{ { 0xff, 0xff }, { 0x6a, 0x84 } , "P1-P2: not enough memory space in file" },
+		{ { 0xff, 0xff }, { 0x6a, 0x85 } , "P1-P2: Lc inconsistent with TLV" },
+		{ { 0xff, 0xff }, { 0x6a, 0x86 } , "P1-P2 incorrect" },
+		{ { 0xff, 0xff }, { 0x6a, 0x87 } , "P1-P2 inconsistent with Lc" },
+		{ { 0xff, 0xff }, { 0x6a, 0x88 } , "Referenced data not found" },
+		{ { 0xff, 0x00 }, { 0x6a, 0x00 } , "P1-P2 invalid" },
+
+		{ { 0xff, 0x00 }, { 0x6b, 0x00 } , "P1-P2 invalid" },
+
+		{ { 0xff, 0x00 }, { 0x6c, 0x00 } , "wrong length -  %d expected" },
+
+		{ { 0xff, 0x00 }, { 0x6d, 0x00 } , "INS code not supported or invalid" },
+
+		{ { 0xff, 0x00 }, { 0x6e, 0x00 } , "CLA %02X not supported" },
+
+		{ { 0xff, 0x00 }, { 0x6f, 0x00 } , "no precise diagnosis" },
+
+		{ { 0x00, 0x00 }, { 0x00, 0x00 } , "Unknown response" }
+	};
+
+/* Error "procedure" */
+
+#define E(x)  \
+  if (x!=SCARD_S_SUCCESS)  \
+  {  \
+    int e=x; \
+    OnExit(); \
+    fprintf(stderr,"GsmAuth:ERR: %s#%d => %d=0x%X - %s\n",__FILE__,__LINE__, e, e, pcsc_stringify_error(e) );  \
+    return -1;  \
+  }
+
+GsmAuth::GsmAuth()
+{
+	g_sc_context=0;
+	g_card_hdl=0;
+	o_readername=0;
+	o_transaction=1;
+	error = 0;
+	o_stdprotocol=SCARD_PROTOCOL_T0;
+	o_activeprotocol = SCARD_PROTOCOL_T0;
+	//chv1 = 0;
+}
+
+GsmAuth::~GsmAuth()
+{
+}
+
+unsigned char GsmAuth::hinibble(unsigned char c)
+{
+  unsigned char k;
+
+  k = (c >> 4) & 0x0f;
+  if (k == 0x0f)
+    return 0;
+  else
+    return (k + '0');
+}
+
+unsigned char GsmAuth::lonibble(unsigned char c)
+{
+  unsigned char k;
+
+  k = c & 0x0f;
+  if (k == 0x0f)
+    return 0;
+  else
+    return (k + '0');
+}
+
+int GsmAuth::OnExit(void)
+{
+	LONG ret;
+
+	if (g_card_hdl)  {
+		if (o_transaction)  {
+			ret=SCardEndTransaction(g_card_hdl,SCARD_LEAVE_CARD);
+			E(ret);
+		}
+		ret=SCardDisconnect(g_card_hdl,SCARD_UNPOWER_CARD);
+		g_card_hdl=0;
+		fprintf(stderr,"GsmAuth:Exit: %s#%d => %ld=0x%luX - %s\n",__FILE__,__LINE__, ret, ret, pcsc_stringify_error(ret) );
+	}
+	if (g_sc_context)  {
+		ret=SCardReleaseContext(g_sc_context);
+		g_sc_context=0;
+		fprintf(stderr,"GsmAuth:Exit: %s#%d => %ld=0x%luX - %s\n",__FILE__,__LINE__, ret, ret, pcsc_stringify_error(ret) );
+	}
+	return 0;
+}
+
+int GsmAuth::card_io(char *arg, LPBYTE outbuff, LPDWORD olen)
+
+{
+	static SCARD_IO_REQUEST scir;
+	static char g_getresponse[5]= {0xa0,0xc0,0x00,0x00 };
+	unsigned int j,c;
+	int i, p, len2 = 0, l;
+	unsigned char ins;
+	LONG ret;
+	unsigned char *s,*cp;
+	unsigned char cmd[MAXBUFF];
+	int o_explanation=0;
+
+	if(!g_card_hdl)
+	{
+		printf(" AuthGsm:card_io:  no card handle ...\n");
+		return -1;
+	}
+	if ((len2=strlen(arg)) && isspace(arg[len2]))	/* trim trailing blank */
+		arg[len2]=0;
+
+	cp = (unsigned char*)arg;
+	len2 = 0;                  
+	while (*cp && sscanf((const char *)cp, "%02x %n", &c, &l)>0)
+	{
+		cmd[len2] = c;
+		/* printf(" ----- %d %X, %d\n", c, c, l); */
+		len2++;
+		cp += l;
+	}
+	if (len2==0) return 1;
+
+	ins = cmd[1];
+	*olen=MAXBUFF;
+       ret = SCardSetTimeout( g_card_hdl, 5 );
+	if (ret != SCARD_S_SUCCESS) {
+		fprintf(stderr,"fatal: SCardSetTimeout returns error=%ld\n", ret);
+		exit(1);
+	}
+	ret=SCardTransmit(g_card_hdl,
+			o_activeprotocol==SCARD_PROTOCOL_T1 ? SCARD_PCI_T1 : SCARD_PCI_T0,
+			cmd, len2, &scir,
+			(BYTE*)outbuff, olen);
+	E(ret);
+
+	if (*olen==2) {
+		switch ((unsigned char)outbuff[0]) {
+		case 0x61:
+		case 0x9f:
+			if (outbuff[1]==0)
+			{
+				break;
+			}
+			g_getresponse[4]=outbuff[1];
+
+			*olen=MAXBUFF;
+			ret = SCardSetTimeout( g_card_hdl, 5 );
+			if (ret != SCARD_S_SUCCESS) {
+				fprintf(stderr,"fatal: SCardSetTimeout returns error=%ld\n", ret);
+				exit(1);
+			}
+			ret=SCardTransmit(g_card_hdl,
+				o_activeprotocol==SCARD_PROTOCOL_T1 ? SCARD_PCI_T1 : SCARD_PCI_T0,
+				(const unsigned char *)g_getresponse,sizeof(g_getresponse),&scir,
+				(BYTE *)outbuff, olen);
+
+			E(ret);
+			s = outbuff;
+
+			if (((ins == 0xa4) || (ins == 0xf2))&&
+					((s[6] == 1) || (s[6] == 2))) { /* DF or MF */
+				fprintf(stderr,"SELECT GETRESPONSE type=%s:\n",filetype[(int)s[6]]);
+
+				fprintf(stderr,"free mem=%d\n",(s[2]<<8)+s[3]);
+				fprintf(stderr,"file ID=%x%x\n",s[4],s[5]);
+				fprintf(stderr,"bytes remaining %d\n",s[12]);
+				if (s[12]>10) {/* if there's some GSM specific data */
+
+					fprintf(stderr,"CHV1 %sabled\n",s[13] & 0x80 ? "dis" : "en");
+					fprintf(stderr,"%d sub DF's, %d EF's in cd\n",s[14],s[15]);
+					fprintf(stderr,"%d CHV, UNBLOCK CHV and admin codes\n",s[16]);
+
+					fprintf(stderr,"%s status: secret code %sinitialised, %d attempts remaining\n",
+						"CHV1", s[18] & 0x80 ? "" : "un", s[18] & 0x0f);
+					fprintf(stderr,"%s status: secret code %sinitialised, %d attempts remaining\n",
+						"UNBLOCK CHV1", s[19] & 0x80 ? "" : "un", s[19] & 0x0f);
+					fprintf(stderr,"%s status: secret code %sinitialised, %d attempts remaining\n",
+						"CHV2", s[20] & 0x80 ? "" : "un", s[20] & 0x0f);
+					fprintf(stderr,"%s status: secret code %sinitialised, %d attempts remaining\n",
+					"UNBLOCK CHV2", s[21] & 0x80 ? "" : "un", s[21] & 0x0f);
+				}
+			}
+			if ((ins == 0xa4) /*&& debug*/)
+			{
+				if (s[6] == 4) { /* an EF  */
+					fprintf(stderr,"file ID=%x%x, size=%d\n", s[4], s[5],(s[2]<<8)+s[3]);
+					fprintf(stderr,"file structure=%s, reclen=%d, increase %sallowed, %s invalidated\n",
+						filestruct[s[13]],
+						s[14],
+						(s[7] & 0x40) ? "" : "dis",
+						(s[11] & 0x01) ? "not" : "");
+					fprintf(stderr,"READ/SEEK=%s UPDATE=%s INCREASE=%s RFU=%s REHABILITATE=%s INVALIDATE=%s\n",
+						hi(s[8]),lo(s[8]), hi(s[9]),lo(s[9]),hi(s[10]),lo(s[10]));
+				}
+			}
+		}
+	}
+
+	if (o_explanation) {
+		for(j=0; j<*olen; j++) {
+			fprintf(stderr, "%02X",outbuff[j] & 0xff);
+		}
+		fprintf(stderr, " %ld ",*olen);
+
+
+		if (*olen>=2)
+		{
+			p=*olen-2;
+			for(j=0; j< sizeof(C_response)/sizeof(C_response[0]); j++)
+			{
+				for(i=sizeof(C_response[j].msk)-1; i>=0; i--) {
+					if (C_response[j].rsp[i] != (C_response[j].msk[i] & (unsigned char)outbuff[p+i]))
+						break;
+			    }
+				if (i==-1)
+				{
+					fprintf(stderr,C_response[j].text,(int)(unsigned char)outbuff[p+1]);
+					break;
+				}
+			}
+		}
+		fprintf(stderr,"\n");
+	}
+	return 0;
+}
+
+
+
+int GsmAuth::initContext(const char *chv1 /* the PIN code, if any needed */)
+{
+	LONG ret;
+	unsigned char *s;
+	DWORD len,i,dwState,dwProtocol,dwAtrLen,size;
+	LPSTR mszReaders;
+	BYTE pbAtr[MAX_ATR_SIZE];
+	unsigned char buf[MAXBUFF],buff2[MAXBUFF],buff3[MAXBUFF];
+
+	ret=SCardEstablishContext(SCARD_SCOPE_GLOBAL,NULL,NULL,&g_sc_context);
+	E(ret);
+	if (!o_readername) {
+		ret=SCardListReaders(g_sc_context,NULL,NULL,&len);
+		E(ret);
+		if (len>MAXBUFF) exit(5);
+		ret=SCardListReaders(g_sc_context,NULL, (char*)buf,&len);
+		E(ret);
+
+		s = buf;
+		if (1 /*debug*/) {
+			fprintf(stderr,"connected readers:\n");
+			for (i = 0; i < (len-1); i++)
+				putc(s[i] ? s[i] : '\n',stderr);
+		}
+		o_readername=(char*)buf;	/* take first reader if none specified */
+	}
+
+	while (1)
+	{
+		ret=SCardConnect(g_sc_context, o_readername,
+			SCARD_SHARE_SHARED, // SCARD_SHARE_EXCLUSIVE,
+			o_stdprotocol,
+			&g_card_hdl, (long unsigned int*)(&o_activeprotocol));
+
+		if (ret == SCARD_S_SUCCESS) break;
+
+		if (ret == (LONG)SCARD_E_NO_SMARTCARD)
+		{
+			if (1 /*debug*/) {
+				fprintf(stderr,"insert a smart card\n");
+			}
+			sleep(2);
+			continue;
+		}
+		E(ret);
+	}
+
+	fprintf(stderr,"smart card found\n");
+
+ 	/* fetch ATR - figure out card type */
+	size = 50;
+	mszReaders = (LPSTR) malloc(size);
+	ret = SCardStatus( g_card_hdl, mszReaders, &size, &dwState, &dwProtocol, pbAtr, &dwAtrLen);
+
+	if (ret != SCARD_S_SUCCESS) {
+		fprintf(stderr,"fatal: SCardStatus returns %ld\n",ret);
+		exit(1);
+	}
+	if (1 /*debug*/) {
+		printf("readername=\"%s\"\n",mszReaders);
+		printf("ATR = ");
+		for (i = 0; i < dwAtrLen;i++)
+			printf("%2X ",pbAtr[i]);
+		printf("\n");
+	}
+
+       printf("GsmAuth:initContext: pin [%s]\n", (chv1)?chv1:"null");
+	/* at this point, we could do something useful with the ATR, which we currently dont */
+
+	if (o_transaction) {
+		ret=SCardBeginTransaction(g_card_hdl);
+		E(ret);
+	}
+
+	/* select MF */
+	if(card_io((char*)"A0 A4 00 00 02 3F 00",buf,&len)<0)
+		return -1;
+
+	/* select DF_GSM */
+	if(card_io((char*)"A0 A4 00 00 02 7F 20",buf,&len)< 0)
+		return -1;
+
+	/* test if we need to present CHV1  */
+	printf("GsmAuth:initContext:  test if CHV1 needed\n");
+	if (!(buf[13] & 0x80)) {
+		if (!chv1 || strlen(chv1)<2) {
+			fprintf(stderr,"GsmAuth:initContext: PIN1 required\n");
+			OnExit();
+			error = GA_ERR_NO_PIN;
+			return -1;
+		} else {
+			strcpy((char*)buff2,"A0 20 00 01 08 ");
+			for (i = 0; i < strlen((const char*)chv1); i++) {
+				sprintf((char*)buff3,"%02X ",chv1[i]);
+				strcat((char*)buff2,(const char*)buff3);
+			}
+			for (i = strlen((const char*)chv1); i < 8; i++) {
+				strcat((char*)buff2,"FF ");	/* pad with 0xFF up to 8 */
+			}
+			if(card_io((char*)buff2,buf,&len)< 0)
+			{
+				OnExit();
+				error = GA_ERR_WRONG_PIN;
+				return -1;
+			}
+		}
+	}
+	return 0;
+}
+
+const char* GsmAuth::getIMSI()
+{
+	return imsi;
+}
+
+int GsmAuth::retrieveIMSI(const char *chv1 /* the PIN code, if any needed */)
+{
+	unsigned char buf[MAXBUFF],buff2[MAXBUFF];
+	DWORD len;
+	LPBYTE s;
+	int i;
+
+	if(!g_sc_context ||  !g_card_hdl)
+		if(initContext(chv1)<0)
+			return -1;
+
+	/* select EF_IMSI */
+	if(card_io((char*)"A0 A4 00 00 02 6F 07",buf,&len) < 0)
+		return -1;
+
+	/* length of IMSI = filesize = buf[2,3]*/
+
+	sprintf((char *)buff2,"A0 B0 00 00 %02X", (buf[2]<<8) + buf[3]);
+	memset(buf,0,sizeof(buf));
+
+	/* READ BINARY */
+	if(card_io((char*)buff2, buf, &len)< 0)
+		return -1;
+
+	s = (LPBYTE)imsi;
+	*s++ = hinibble(buf[1]);
+
+	for (i = 2; i  < 9; i++) {
+		*s++ = lonibble(buf[i]);
+	*s++ = hinibble(buf[i]);
+	}
+	*s = '\0';
+
+	fprintf(stderr,"IMSI = %s\n",imsi);
+	return 0;
+}
+
+int GsmAuth::getAuthResponse(char *challenge, int challenge_len,
+		char *response, int* response_len, const char *chv1 /* the PIN code, if any needed */)
+{
+	unsigned char buf[MAXBUFF],buff2[MAXBUFF],buff3[MAXBUFF];
+	DWORD len;
+	int j;
+
+	if(!challenge || challenge_len <=0 || !response || !response_len)
+		return -1;
+	if(!g_sc_context ||  !g_card_hdl)
+		if(initContext(chv1)<0)
+			return -1;
+
+	strcpy((char*)buff2,"A0 88 00 00 10 "); /* run GSM algorithm */
+
+	j = 0;
+	buff3[2] = ' ';
+	buff3[3] = '\0';
+	while(j < challenge_len)
+	{
+		buff3[0] = challenge[j++];
+		buff3[1] = challenge[j++];
+		strcat((char*)buff2, (const char*)buff3);
+	}
+
+	if(card_io((char*)buff2,  buf, &len)< 0)
+		return -1;
+
+	/* output IMSI, challenge, response, Kc */
+	printf("#####: '%s', ",imsi);
+	printf("'%s', ",challenge);
+	response[0] = '\0';
+	for (j = 0;j < 4; j++)
+	{
+		sprintf((char*)buff3,"%02X",buf[j]); /* convert to hexa */
+		strcat(response, (const char *)buff3);
+		printf("%02X",buf[j]);	/* response */
+	}
+	printf("','");
+	for (j = 4;j < 12; j++)
+		printf("%02X",buf[j]);	/* cipher key */
+	printf("',\n");
+	*response_len = strlen(response);
+
+	return 0;
+}
+
+#endif /* WITH_GSM_AUTH */
diff -r -N -u kphone-3.11/dissipate2/gsmauth.h kphone-3.11-gsm/dissipate2/gsmauth.h
--- kphone-3.11/dissipate2/gsmauth.h	Thu Jan  1 01:00:00 1970
+++ kphone-3.11-gsm/dissipate2/gsmauth.h	Fri Aug  1 20:51:00 2003
@@ -0,0 +1,47 @@
+#include <config.h>
+
+#ifndef GSMAUTH_H_INCLUDED
+#define GSMAUTH_H_INCLUDED
+#ifdef WITH_GSM_AUTH
+
+#include <winscard.h>
+
+#define GA_ERR_NO_PIN 1
+#define GA_ERR_WRONG_PIN 2
+
+typedef struct { unsigned char msk[2], rsp[2]; const char *text; } t_response;
+
+class GsmAuth
+{
+public:
+	GsmAuth( void );
+	~GsmAuth( void );
+	const char* getIMSI();
+	int retrieveIMSI( const char *chv1 /* the PIN code, if any needed */);
+	int initContext(const char *chv1 /* the PIN code, if any needed */);
+	int getAuthResponse(char *challenge, int challenge_len,
+		char *response, int* response_len, const char *chv1 /* the PIN code, if any needed */);
+	int OnExit(void);
+	void resetError(void) { error=0; }
+	int getError(void) { return error; }
+	void setError(int e) { error = e; }
+
+protected:
+	SCARDCONTEXT g_sc_context;
+	SCARDHANDLE g_card_hdl;
+	char imsi[20],kc[20],sres[20],challenge[20];
+	char *o_readername;
+	DWORD o_stdprotocol;
+	DWORD o_activeprotocol;
+	int o_transaction;   /* need this if we write to the card - we currently dont */
+	int error;
+
+
+	unsigned char hinibble(unsigned char c);
+	unsigned char lonibble(unsigned char c);
+	int card_io(char *arg, LPBYTE outbuff, LPDWORD olen);
+};
+
+#endif
+#endif
+
diff -r -N -u kphone-3.11/dissipate2/sipcall.cpp kphone-3.11-gsm/dissipate2/sipcall.cpp
--- kphone-3.11/dissipate2/sipcall.cpp	Fri May 23 05:59:30 2003
+++ kphone-3.11-gsm/dissipate2/sipcall.cpp	Tue Aug  5 20:10:55 2003
@@ -186,7 +186,12 @@
 	}
 	if( status == AuthenticationRequired ||
 			status == AuthenticationRequiredWithNewPassword ||
-			status == AuthenticationRequired_Connected ) {
+			status == AuthenticationRequired_Connected
+#ifdef WITH_GSM_AUTH
+			|| status == GsmAuthFirstPhase
+			|| status == GsmAuthSecondPhase
+#endif
+	) {
 		QString u = call->getProxyUsername();
 		QString p = call->getPassword();
 		if( p.isEmpty() || status == AuthenticationRequiredWithNewPassword ) {
@@ -211,17 +216,42 @@
 		} else {  // if not AuthenticationRequiredWithNewPassword
 			if (status == AuthenticationRequired ) {
 				status = MessageRequestedWithPassword;
-			} else {
+			} else
+#ifdef WITH_GSM_AUTH
+			if(status == GsmAuthFirstPhase
+				|| status == GsmAuthSecondPhase)
+			{
+				printf( "SipMessage: GsmAuthentication required -- phase [%d]\n", status );
+			}
+			else
+#endif
+			 {
 				status = Connected;
 			}
 		}
-		printf( "SipInvite: Authentication required\n" );
+		printf( "SipMessage: Authentication required\n" );
 		if( authtype == ProxyDigestAuthenticationRequired ) {
 			proxyauthresponse = Sip::getDigestResponse( u, p, "MESSAGE", getContactUri().uri(), proxyauthstr );
 		} else if( authtype == ProxyBasicAuthenticationRequired ) {
 			proxyauthresponse = Sip::getBasicResponse( u, p );
 		}
-		printf( "SipInvite: Proxy Auth is '%s'\n", proxyauthresponse.latin1() );
+#ifdef WITH_GSM_AUTH
+		else if( authtype == ProxyGSMAuthenticationRequired ) {
+			if(call->getGsmAuth()==NULL)
+			{
+				printf( "SipMessage: no GsmAuth object'\n" );
+				return false;
+			}
+			call->getGsmAuth()->resetError();
+			proxyauthresponse = Sip::getGSMResponse( proxyauthstr, p, call->getGsmAuth()  );
+			if( call->getGsmAuth()->getError() == GA_ERR_WRONG_PIN
+				|| call->getGsmAuth()->getError() == GA_ERR_NO_PIN)
+			{
+				return false;
+			}
+		}
+#endif
+		printf( "SipMessage: Proxy Auth is '%s'\n", proxyauthresponse.latin1() );
 		local = call->newRequest( this, Sip::MESSAGE, localsessiondesc, localsessiontype,
 		SipUri::null, proxyauthresponse );
 	} else {
@@ -250,7 +280,12 @@
 	}
 	if( status == AuthenticationRequired ||
 			status == AuthenticationRequiredWithNewPassword ||
-			status == AuthenticationRequired_Connected ) {
+			status == AuthenticationRequired_Connected
+#ifdef WITH_GSM_AUTH
+			|| status == GsmAuthFirstPhase
+			|| status == GsmAuthSecondPhase
+#endif
+	 ) {
 		QString u = call->getProxyUsername();
 		QString p = call->getPassword();
 		if( p.isEmpty() || status == AuthenticationRequiredWithNewPassword ) {
@@ -275,7 +310,16 @@
 		} else {  // if not AuthenticationRequiredWithNewPassword
 			if (status == AuthenticationRequired ) {
 				status = InviteRequestedWithPassword;
-			} else {
+			} else
+#ifdef WITH_GSM_AUTH
+			if(status == GsmAuthFirstPhase
+				|| status == GsmAuthSecondPhase)
+			{
+				printf( "SipInvite: GsmAuthentication required -- phase [%d]\n", status );
+			}
+			else
+#endif
+			 {
 				status = Connected;
 			}
 		}
@@ -285,7 +329,23 @@
 		} else if( authtype == ProxyBasicAuthenticationRequired ) {
 			proxyauthresponse = Sip::getBasicResponse( u, p );
 		}
-		printf( "SipInvite: Proxy Auth is '%s'\n", proxyauthresponse.latin1() );
+#ifdef WITH_GSM_AUTH
+		else if( authtype == ProxyGSMAuthenticationRequired ) {
+			if(call->getGsmAuth()==NULL)
+			{
+				printf( "SipInvite: no GsmAuth object'\n" );
+				return false;
+			}
+			call->getGsmAuth()->resetError();
+			proxyauthresponse = Sip::getGSMResponse( proxyauthstr, p, call->getGsmAuth()  );
+			if( call->getGsmAuth()->getError() == GA_ERR_WRONG_PIN
+				|| call->getGsmAuth()->getError() == GA_ERR_NO_PIN)
+			{
+				return false;
+			}
+		}
+#endif
+		printf( "SipInvite: Proxy Auth is '%s' !!!\n", proxyauthresponse.latin1() );
 		local = call->newRequest( this, Sip::INVITE, localsessiondesc, localsessiontype,
 		SipUri::null, proxyauthresponse );
 	} else {
@@ -421,7 +481,7 @@
 		printf( "SipCallMember: Received what was likely a retransmission, badly ignoring...\n" );
 		return;
 	}
-	printf( "SipCallMember: localStatusUpdated: %d\n", local->getStatus().getCode() );
+	printf( "SipCallMember: localStatusUpdated: %d -- method [%d]\n", local->getStatus().getCode(), call->getLastMethod() );
 	mtype = local->getFinalContentType();
 	if( mtype == MimeContentType( "application/sdp" ) ) {
 		sessiondesc = local->getFinalMessageBody();
@@ -433,7 +493,12 @@
 	if( status == InviteRequested ||
 			status == InviteRequestedWithPassword ||
 			status == ReInviteRequested ||
-			status == InviteEarlyDialog ) {
+			status == InviteEarlyDialog
+#ifdef WITH_GSM_AUTH
+			|| (call->getLastMethod() == Sip::INVITE
+					&& ( status==GsmAuthFirstPhase || status==GsmAuthSecondPhase ))
+#endif
+	 ) {
 		if( local->wasCancelled() ) {
 			status = Disconnected;
 			statusdesc = "Request cancelled";
@@ -459,14 +524,31 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				  }
+#endif
+				else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
+#ifdef WITH_GSM_AUTH
+				if(authtype == ProxyGSMAuthenticationRequired)
+				{
+					if( authstrtemp.contains( "nonce=" ) )
+						status = GsmAuthSecondPhase;
+					else
+						status = GsmAuthFirstPhase;
+				}
+				else
+#endif
 				if( status == InviteRequestedWithPassword ) {
 					status = AuthenticationRequiredWithNewPassword;
 				} else {
 					status = AuthenticationRequired;
 				}
+
 				local = 0;
 				requestInvite();
 			} else {
@@ -475,7 +557,12 @@
 				local = 0;
 			}
 		}
-	} else if( status == MessageRequested || status == MessageRequestedWithPassword ) {
+	} else if( status == MessageRequested || status == MessageRequestedWithPassword
+#ifdef WITH_GSM_AUTH
+			|| (call->getLastMethod() == Sip::MESSAGE
+					&& ( status==GsmAuthFirstPhase || status==GsmAuthSecondPhase ))
+#endif
+	) {
 		if( local->wasCancelled() ) {
 			local = 0;
 		} else if( local->getStatus().getCode() < 200 ) {
@@ -487,9 +574,25 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				}
+#endif
+				 else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
+#ifdef WITH_GSM_AUTH
+				if(authtype == ProxyGSMAuthenticationRequired)
+				{
+					if( authstrtemp.contains( "nonce=" ) )
+						status = GsmAuthSecondPhase;
+					else
+						status = GsmAuthFirstPhase;
+				}
+				else
+#endif
 				if( status == MessageRequestedWithPassword ) {
 					status = AuthenticationRequiredWithNewPassword;
 				} else {
@@ -513,11 +616,27 @@
 		} else if( local->getStatus().getCode() == 401) {
 			proxyauthstr = local->getFinalWWWAuthString();
 			authstrtemp = proxyauthstr.lower();
-			if( authstrtemp.contains( "digest" ) ) {
+			if( authstrtemp.contains( "digest " ) ) {
 				authtype = ProxyDigestAuthenticationRequired;
-			} else {
+			}
+#ifdef WITH_GSM_AUTH
+			else if( authstrtemp.contains( "gsm " ) ) {
+				authtype = ProxyGSMAuthenticationRequired;
+			}
+#endif
+			else {
 				authtype = ProxyBasicAuthenticationRequired;
 			}
+#ifdef WITH_GSM_AUTH
+			if(authtype == ProxyGSMAuthenticationRequired)
+			{
+				if( authstrtemp.contains( "nonce=" ) )
+					status = GsmAuthSecondPhase;
+				else
+					status = GsmAuthFirstPhase;
+			}
+			else
+#endif
 			if( status == SubscribeRequestedWithPassword ) {
 				status = AuthenticationRequiredWithNewPassword;
 			} else {
@@ -530,9 +649,25 @@
 			authstrtemp = proxyauthstr.lower();
 			if( authstrtemp.contains( "digest" ) ) {
 				authtype = ProxyDigestAuthenticationRequired;
-			} else {
+			}
+#ifdef WITH_GSM_AUTH
+			else if( authstrtemp.contains( "gsm " ) ) {
+				authtype = ProxyGSMAuthenticationRequired;
+			}
+#endif
+			else {
 				authtype = ProxyBasicAuthenticationRequired;
 			}
+#ifdef WITH_GSM_AUTH
+			if(authtype == ProxyGSMAuthenticationRequired)
+			{
+				if( authstrtemp.contains( "nonce=" ) )
+					status = GsmAuthSecondPhase;
+				else
+					status = GsmAuthFirstPhase;
+			}
+			else
+#endif
 			if( status == NotifyRequestedWithPassword ) {
 				status = AuthenticationRequiredWithNewPassword;
 			} else {
@@ -559,9 +694,25 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				}
+#endif
+				else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
+#ifdef WITH_GSM_AUTH
+				if(authtype == ProxyGSMAuthenticationRequired)
+				{
+					if( authstrtemp.contains( "nonce=" ) )
+						status = GsmAuthSecondPhase;
+					else
+						status = GsmAuthFirstPhase;
+				}
+				else
+#endif
 				if( status == NotifyRequestedWithPassword ) {
 					status = AuthenticationRequiredWithNewPassword;
 				} else {
@@ -574,9 +725,25 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				}
+#endif
+				 else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
+#ifdef WITH_GSM_AUTH
+				if(authtype == ProxyGSMAuthenticationRequired)
+				{
+					if( authstrtemp.contains( "nonce=" ) )
+						status = GsmAuthSecondPhase;
+					else
+						status = GsmAuthFirstPhase;
+				}
+				else
+#endif
 				if( status == SubscribeRequestedWithPassword ) {
 					status = AuthenticationRequiredWithNewPassword;
 				} else {
@@ -597,7 +764,13 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				}
+#endif
+				 else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
 				status = AuthenticationRequired_Connected;
@@ -619,7 +792,13 @@
 				authstrtemp = proxyauthstr.lower();
 				if( authstrtemp.contains( "digest" ) ) {
 					authtype = ProxyDigestAuthenticationRequired;
-				} else {
+				}
+#ifdef WITH_GSM_AUTH
+				else if( authstrtemp.contains( "gsm " ) ) {
+					authtype = ProxyGSMAuthenticationRequired;
+				}
+#endif
+				else {
 					authtype = ProxyBasicAuthenticationRequired;
 				}
 				status = AuthenticationRequired;
@@ -745,6 +924,10 @@
 {
 	callstatus = callUnconnected;
 	tcpSocket = 0;
+#ifdef WITH_GSM_AUTH
+	gsmAuth = NULL;
+	lastMethod = Sip::BadMethod;
+#endif
 	if ( id == QString::null ) {
 		callid = SipMessage::createCallId();
 	} else {
@@ -788,6 +971,9 @@
 	const QString &body, const MimeContentType &bodytype, const SipUri &transferto,
 	const QString &proxyauthentication, int expiresTime )
 {
+#ifdef WITH_GSM_AUTH
+	lastMethod = meth;
+#endif
 	SipTransaction *trans = new SipTransaction( lastseq++, member, this );
 	if( trans->sendRequest( meth, body, bodytype, transferto, proxyauthentication, expiresTime ) ) {
 		transactions.append( trans );
diff -r -N -u kphone-3.11/dissipate2/sipcall.h kphone-3.11-gsm/dissipate2/sipcall.h
--- kphone-3.11/dissipate2/sipcall.h	Wed May 21 12:09:50 2003
+++ kphone-3.11-gsm/dissipate2/sipcall.h	Tue Aug  5 19:26:08 2003
@@ -31,6 +31,10 @@
 #include <dissipate2/sipurilist.h>
 #include <dissipate2/mimecontenttype.h>
 
+#ifdef WITH_GSM_AUTH
+#include <dissipate2/gsmauth.h>
+#endif
+
 class SipCall;
 class SipUser;
 class SipClient;
@@ -77,6 +81,10 @@
 		AuthenticationRequired,
 		AuthenticationRequiredWithNewPassword,
 		AuthenticationRequired_Connected,
+#ifdef WITH_GSM_AUTH
+		GsmAuthFirstPhase,
+		GsmAuthSecondPhase,
+#endif
 		InviteRequestedWithPassword,
 		MessageRequestedWithPassword,
 		SubscribeRequestedWithPassword,
@@ -94,7 +102,11 @@
 
 	enum AuthType {
 		ProxyBasicAuthenticationRequired,
-		ProxyDigestAuthenticationRequired };
+		ProxyDigestAuthenticationRequired
+#ifdef WITH_GSM_AUTH
+		,ProxyGSMAuthenticationRequired
+#endif
+		 };
 
 	/**
 	 * Returns the current status of the call member.
@@ -254,6 +266,7 @@
 	void notAcceptableHere( void );
 	SipCall *getCall( void ) { return call; }
 
+
 signals:
 	/**
 	 * This signal is sent whenever the status of this call member has
@@ -455,6 +468,12 @@
 	QString getSdpMessageMask( void ) { return bodyMask; }
 	void updateContact( void );
 
+#ifdef WITH_GSM_AUTH
+	void setGsmAuth(GsmAuth *ga=NULL) { gsmAuth = ga; }
+	GsmAuth *getGsmAuth() { return gsmAuth; }
+	int getLastMethod() { return lastMethod; }
+#endif
+
 signals:
 	/**
 	 * Triggered whenever the call status changes.
@@ -519,6 +538,10 @@
 	QString contactstr;
 
 	bool looseRoute;
+#ifdef WITH_GSM_AUTH
+	GsmAuth *gsmAuth;
+	int lastMethod;
+#endif
 
 };
 
diff -r -N -u kphone-3.11/dissipate2/sipprotocol.cpp kphone-3.11-gsm/dissipate2/sipprotocol.cpp
--- kphone-3.11/dissipate2/sipprotocol.cpp	Tue Aug 27 14:01:34 2002
+++ kphone-3.11-gsm/dissipate2/sipprotocol.cpp	Tue Aug  5 14:39:12 2003
@@ -262,3 +262,72 @@
 	return basic;
 }
 
+#ifdef WITH_GSM_AUTH
+QString Sip::getGSMResponse( const QString &authstr, const QString &password, GsmAuth *gAuth )
+{
+	QString gsm;
+	QString realm = "";
+	QString nonce = "";
+	char response[36];
+	const char *p = authstr.latin1();
+	int i = 0;
+	if(gAuth == NULL)
+		return QString::null;
+
+	while( *p )
+	{
+		while( *p && (( *p == ' ' ) || ( *p == ',' ) || (*p == '\t') ))
+			p++;
+		i = 0;
+		 if( !*p)
+		{ /* NOP */
+		}
+		else if( strncasecmp( p, "realm=\"", 7 ) == 0 )
+		{
+			p += 7;
+			while( *p && p[ i ] != '"' )
+			{
+				realm[ i ] = p[ i ];
+				i++;
+			}
+		} else if( strncasecmp( p, "nonce=\"", 7 ) == 0 ) {
+			p += 7;
+			while( *p && p[ i ] != '"' ) {
+				nonce[ i ] = p[ i ];
+				i++;
+			}
+		}
+		if(*p) {
+			if( i ) p += i; else p++;
+		}
+	}
+	gsm = "GSM ";
+	gsm += "realm=\"";
+	gsm += realm;
+	gsm += "\", username=\"";
+
+	/* get IMSI */
+	/***
+	i = gAuth->initContext(password.latin1());
+	if(i < 0)
+	      retrun QString();
+       ***/
+	gAuth->retrieveIMSI(password.latin1());
+
+	gsm += QString(gAuth->getIMSI());
+
+	if( nonce != "" )
+	{
+		i = 0;
+		response[0] = '\0';
+		gAuth->getAuthResponse((char*)nonce.latin1(), (int)nonce.length(),  (char*)response, &i, password.latin1());
+		gsm += "\", nonce=\"";
+		gsm += nonce;
+		gsm += "\", response=\"";
+		gsm += QString(response);
+	}
+	gsm += "\"";
+	/* gAuth->OnExit(); */
+	return gsm;
+}
+#endif
diff -r -N -u kphone-3.11/dissipate2/sipprotocol.h kphone-3.11-gsm/dissipate2/sipprotocol.h
--- kphone-3.11/dissipate2/sipprotocol.h	Tue Aug 27 14:01:34 2002
+++ kphone-3.11-gsm/dissipate2/sipprotocol.h	Fri Aug  1 19:28:44 2003
@@ -1,3 +1,5 @@
+#include <config.h>
+
 /*
  * This file is part of libdissipate, an open source SIP library.  Please see
  * http://www.div8.net/dissipate for more information.
@@ -36,6 +38,9 @@
 
 #endif
 
+#ifdef WITH_GSM_AUTH
+#include "gsmauth.h"
+#endif
 
 /**
  * This class is a container for items of global interest to a Sip stack.  It
@@ -107,6 +112,13 @@
 	 * Calculate the Basic authentication response.
 	 */
 	static QString getBasicResponse( const QString &user, const QString &password );
+
+#ifdef WITH_GSM_AUTH
+	/**
+	 * Calculate the GSM authentication response.
+	 */
+	static QString getGSMResponse( const QString &authstr, const QString &password, GsmAuth *gAuth );
+#endif
 };
 
 #endif // SIPPROTOCOL_H_INCLUDED
diff -r -N -u kphone-3.11/dissipate2/sipregister.cpp kphone-3.11-gsm/dissipate2/sipregister.cpp
--- kphone-3.11/dissipate2/sipregister.cpp	Wed Mar 12 08:59:00 2003
+++ kphone-3.11-gsm/dissipate2/sipregister.cpp	Fri Aug  1 20:53:01 2003
@@ -11,6 +11,9 @@
 {
 	qValue = qvalue;
 	autoregister = false;
+#ifdef WITH_GSM_AUTH
+	gsmAuthentication = false;
+#endif
 	if( expires > 0 && expires < minValidTime ) {
 		expires = minValidTime;
 	} else if( expires <= 0) {
@@ -42,6 +45,9 @@
 {
 	regUser->removeServer( this );
 	delete regcall;
+#ifdef WITH_GSM_AUTH
+	gAuth.OnExit();
+#endif
 }
 
 void SipRegister::setOutboundProxyUri( const SipUri &newregserver )
@@ -51,25 +57,66 @@
 
 void SipRegister::requestRegister( const QString &username, const QString &password )
 {
+#ifdef WITH_GSM_AUTH
+	int gsm_auth_flag = 0;
+#endif
 	if ( regop == NoRegOpPending ) {
 		regop = RegRequest;
-		if( !username.isEmpty() && !password.isEmpty() &&
+		if( !username.isEmpty() &&
+#ifndef WITH_GSM_AUTH
+			 !password.isEmpty() &&
+#endif
 				( rstate == AuthenticationRequired ||
-				rstate == AuthenticationRequiredWithNewPassword ) ) {
+				rstate == AuthenticationRequiredWithNewPassword
+#ifdef WITH_GSM_AUTH
+				|| rstate == GsmAuthFirstPhase
+				|| rstate == GsmAuthSecondPhase
+#endif
+				) ) {
+#ifdef WITH_GSM_AUTH
+			if(rstate == GsmAuthFirstPhase)
+				gsm_auth_flag = 1;
+			if(rstate == GsmAuthSecondPhase)
+				gsm_auth_flag = 2;
+#endif
 			printf( "SipRegister: Authentication required\n" );
 			if( authtype == DigestAuthenticationRequired ) {
 				authresponse = Sip::getDigestResponse( username, password, "REGISTER", regserver.uri(), authstr );
 			} else if( authtype == BasicAuthenticationRequired ) {
 				authresponse = Sip::getBasicResponse( username, password );
-			} else if( authtype == ProxyDigestAuthenticationRequired ) {
+			}
+#ifdef WITH_GSM_AUTH
+			 else if( authtype == GSMAuthenticationRequired ) {
+				 gAuth.resetError();
+				authresponse = Sip::getGSMResponse( authstr, password, &gAuth );
+				if( gAuth.getError() == GA_ERR_WRONG_PIN
+					 || gAuth.getError() == GA_ERR_NO_PIN)
+				{
+					return;
+				}
+			}
+#endif
+			 else if( authtype == ProxyDigestAuthenticationRequired ) {
 				proxyauthresponse = Sip::getDigestResponse( username, password, "REGISTER", regserver.uri(), proxyauthstr );
 			} else if( authtype == ProxyBasicAuthenticationRequired ) {
 				proxyauthresponse = Sip::getBasicResponse( username, password );
 			}
+#ifdef WITH_GSM_AUTH
+			 else if( authtype == ProxyGSMAuthenticationRequired ) {
+				 gAuth.resetError();
+				proxyauthresponse = Sip::getGSMResponse( proxyauthstr, password, &gAuth  );
+				if( gAuth.getError() == GA_ERR_WRONG_PIN
+					|| gAuth.getError() == GA_ERR_NO_PIN)
+				{
+					return;
+				}
+			}
+#endif
 			rstate = TryingServerWithPassword;
 		} else {
 			rstate = TryingServer;
 		}
+		printf( "SipRegister: RState is '%d'\n", rstate );
 		printf( "SipRegister: Auth is '%s'\n", authresponse.latin1() );
 		printf( "SipRegister: Proxy Auth is '%s'\n", proxyauthresponse.latin1() );
 		if( cleanRegister ) {
@@ -78,6 +125,9 @@
 		} else {
 			curtrans = regcall->newRegister( regserver, expiresTime, authresponse, proxyauthresponse, qValue );
 		}
+#ifdef WITH_GSM_AUTH
+		if(gsm_auth_flag != 1)
+#endif
 		cleanRegister = false;
 		connect( curtrans, SIGNAL( statusUpdated() ), this, SLOT( localStatusUpdated() ) );
 	}
@@ -135,9 +185,19 @@
 			}
 			authstr = curtrans->getFinalWWWAuthString();
 			authstrtemp = authstr.lower();
-			if( authstrtemp.contains( "digest" ) ) {
+			if( authstrtemp.contains( "digest " ) ) {
 				authtype = DigestAuthenticationRequired;
-			} else {
+			}
+#ifdef WITH_GSM_AUTH
+			else if( authstrtemp.contains( "gsm " ) ) {
+				authtype = GSMAuthenticationRequired;
+				if( authstrtemp.contains( "nonce=" ) )
+					rstate = GsmAuthSecondPhase;
+				else
+					rstate = GsmAuthFirstPhase;
+			}
+#endif
+			else {
 				authtype = BasicAuthenticationRequired;
 			}
 			curtrans = 0;
@@ -150,9 +210,20 @@
 			proxyauthstr = curtrans->getFinalProxyAuthString();
 			printf( "SipRegister: Proxy auth string: '%s'\n", proxyauthstr.latin1() );
 			authstrtemp = proxyauthstr.lower();
-			if( authstrtemp.contains( "digest" ) ) {
+			if( authstrtemp.contains( "digest " ) ) {
 				authtype = ProxyDigestAuthenticationRequired;
-			} else {
+			}
+#ifdef WITH_GSM_AUTH
+			else if( authstrtemp.contains( "gsm " ) ) {
+				authtype = ProxyGSMAuthenticationRequired;
+				if( authstrtemp.contains( "nonce=" ) )
+					rstate = GsmAuthSecondPhase;
+				else
+					rstate = GsmAuthFirstPhase;
+				
+			}
+#endif
+			else {
 				authtype = ProxyBasicAuthenticationRequired;
 			}
 			curtrans = 0;
diff -r -N -u kphone-3.11/dissipate2/sipregister.h kphone-3.11-gsm/dissipate2/sipregister.h
--- kphone-3.11/dissipate2/sipregister.h	Tue Apr 15 12:20:40 2003
+++ kphone-3.11-gsm/dissipate2/sipregister.h	Fri Aug  1 20:17:40 2003
@@ -1,3 +1,5 @@
+#include <config.h>
+
 /*
  * This file is part of libdissipate, an open source SIP library.  Please see
  * http://www.div8.net/dissipate for more information.
@@ -17,7 +19,7 @@
  * 
  * You should have received a copy of the GNU Library General Public License
  * along with this library; see the file COPYING.LIB.  If not, write to the
- * Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,
+ * Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,   
  * MA 02111-1307, USA.
  *
  */
@@ -62,13 +64,25 @@
 		Disconnecting,
 		TryingServerWithPassword,
 		AuthenticationRequiredWithNewPassword,
-		Reconnecting };
+		Reconnecting
+#ifdef WITH_GSM_AUTH
+		,GsmAuthFirstPhase
+		,GsmAuthSecondPhase
+#endif
+		};
 
 	enum AuthType {
 		BasicAuthenticationRequired,
+#ifdef WITH_GSM_AUTH
+		GSMAuthenticationRequired,
+#endif
 		DigestAuthenticationRequired,
 		ProxyBasicAuthenticationRequired,
-		ProxyDigestAuthenticationRequired };
+#ifdef WITH_GSM_AUTH
+		ProxyGSMAuthenticationRequired,
+#endif
+		ProxyDigestAuthenticationRequired
+	};
 
 	/**
 	 * Returns the current state of the registration with the server.
@@ -130,6 +144,11 @@
 	void setAutoRegister( bool autoreg ) { autoregister = autoreg; }
 	bool getAutoRegister( void ) { return autoregister; }
 	void updateRegister( void );
+#ifdef WITH_GSM_AUTH
+	void setGSMAuthentication( bool auth ) { gsmAuthentication = auth; }
+	bool getGSMAuthentication( void ) { return gsmAuthentication; }
+	GsmAuth* getGsmAuth(void) { return &gAuth; }
+#endif
 	QString getOutboundProxy( void ) { return outboundProxy; }
 	QString getQvalue( void ) { return qValue; }
 
@@ -146,6 +165,10 @@
 
 private:
 	bool autoregister;
+#ifdef WITH_GSM_AUTH
+	bool gsmAuthentication;
+	GsmAuth gAuth;
+#endif
 	QTimer *timer;
 	SipUser *regUser;
 	int expiresTime;
diff -r -N -u kphone-3.11/ilbc/Makefile.in kphone-3.11-gsm/ilbc/Makefile.in
--- kphone-3.11/ilbc/Makefile.in	Wed Jan 22 10:46:05 2003
+++ kphone-3.11-gsm/ilbc/Makefile.in	Mon Aug  4 20:54:16 2003
@@ -103,6 +103,7 @@
 LIBJPEG = @LIBJPEG@
 LIBMICO = @LIBMICO@
 LIBOBJS = @LIBOBJS@
+LIBPCSCLITE = @LIBPCSCLITE@
 LIBPNG = @LIBPNG@
 LIBPTHREAD = @LIBPTHREAD@
 LIBPYTHON = @LIBPYTHON@
@@ -146,6 +147,8 @@
 PAMINC = @PAMINC@
 PAMLIBPATHS = @PAMLIBPATHS@
 PAMLIBS = @PAMLIBS@
+PCSCLITE_INCLUDES = @PCSCLITE_INCLUDES@
+PCSCLITE_LDFLAGS = @PCSCLITE_LDFLAGS@
 PYTHONINC = @PYTHONINC@
 PYTHONLIB = @PYTHONLIB@
 PYTHONMODDIR = @PYTHONMODDIR@
diff -r -N -u kphone-3.11/kphone/Makefile.in kphone-3.11-gsm/kphone/Makefile.in
--- kphone-3.11/kphone/Makefile.in	Wed Jan 22 11:21:39 2003
+++ kphone-3.11-gsm/kphone/Makefile.in	Tue Aug  5 13:07:19 2003
@@ -108,6 +108,7 @@
 LIBJPEG = @LIBJPEG@
 LIBMICO = @LIBMICO@
 LIBOBJS = @LIBOBJS@
+LIBPCSCLITE = @LIBPCSCLITE@
 LIBPNG = @LIBPNG@
 LIBPTHREAD = @LIBPTHREAD@
 LIBPYTHON = @LIBPYTHON@
@@ -151,6 +152,8 @@
 PAMINC = @PAMINC@
 PAMLIBPATHS = @PAMLIBPATHS@
 PAMLIBS = @PAMLIBS@
+PCSCLITE_INCLUDES = @PCSCLITE_INCLUDES@
+PCSCLITE_LDFLAGS = @PCSCLITE_LDFLAGS@
 PYTHONINC = @PYTHONINC@
 PYTHONLIB = @PYTHONLIB@
 PYTHONMODDIR = @PYTHONMODDIR@
@@ -287,7 +290,7 @@
 
 #>- DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
 #>+ 4
-KDE_DIST=ksipuserinfo.h dial.png hangup.png kphone.desktop kphonetimer.h dspfulldiverter.h defines.h mini-kphone.png dspoutrtp.h lo-kphone.png kphone.h thread.h online.png kphone.kdevses kphoneview.h dspcontrol.h dspoutoss.cpp_vara dspoutoss.h ksippreferences.h kphone.kdevprj dspout.h audiocontrol.h large-kphone.png callaudio.h configure.in.in enter.png ksipoptions.h phonebook.png menulistview.h offline.png kcallwidget.h bhistoryline.h g711.h dspaction.h audiobuffer.h calllistview.h kphone dspeffect.h kphone_meta_unload.cpp video.png dspdiverter.h rtpdataheader.h dspoutoss.cpp-ori ksipregistrations.h 
+KDE_DIST=ksipuserinfo.h dial.png hangup.png kphone.desktop kphonetimer.h dspfulldiverter.h defines.h mini-kphone.png dspoutrtp.h videocall.png lo-kphone.png kphone.h thread.h online.png kphoneview.h dspcontrol.h dspoutoss.h ksippreferences.h dspout.h audiocontrol.h large-kphone.png callaudio.h configure.in.in enter.png ksipoptions.h phonebook.png menulistview.h offline.png kcallwidget.h bhistoryline.h g711.h dspaction.h audiobuffer.h calllistview.h dspeffect.h dspdiverter.h rtpdataheader.h ksipregistrations.h 
 
 DISTFILES= $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST) $(KDE_DIST)
 
@@ -742,7 +745,7 @@
 	-rm -f  kphone_meta_unload.cpp
 
 #>+ 11
-kphone.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/main.cpp $(srcdir)/kphone.cpp $(srcdir)/kphoneview.cpp $(srcdir)/audiobuffer.cpp $(srcdir)/dspout.cpp $(srcdir)/dspoutoss.cpp $(srcdir)/dspcontrol.cpp $(srcdir)/dspaction.cpp $(srcdir)/bhistoryline.cpp $(srcdir)/menulistview.cpp $(srcdir)/dspoutrtp.cpp $(srcdir)/g711.cpp $(srcdir)/thread.cpp $(srcdir)/dspdiverter.cpp $(srcdir)/calllistview.cpp $(srcdir)/kphonetimer.cpp $(srcdir)/dspeffect.cpp $(srcdir)/kcallwidget.cpp $(srcdir)/dspfulldiverter.cpp $(srcdir)/callaudio.cpp $(srcdir)/ksipuserinfo.cpp $(srcdir)/ksipregistrations.cpp $(srcdir)/audiocontrol.cpp $(srcdir)/ksippreferences.cpp $(srcdir)/ksipoptions.cpp $(srcdir)/kphone_meta_unload.cpp   audiocontrol.moc kcallwidget.moc callaudio.moc kphone.moc calllistview.moc ksipuserinfo.moc kphonetimer.moc kphoneview.moc bhistoryline.moc ksipoptions.moc ksipregistrations.moc ksippreferences.moc menulistview.moc 
+kphone.all_cpp.cpp: $(srcdir)/Makefile.in $(srcdir)/main.cpp $(srcdir)/kphone.cpp $(srcdir)/kphoneview.cpp $(srcdir)/audiobuffer.cpp $(srcdir)/dspout.cpp $(srcdir)/dspoutoss.cpp $(srcdir)/dspcontrol.cpp $(srcdir)/dspaction.cpp $(srcdir)/bhistoryline.cpp $(srcdir)/menulistview.cpp $(srcdir)/dspoutrtp.cpp $(srcdir)/g711.cpp $(srcdir)/thread.cpp $(srcdir)/dspdiverter.cpp $(srcdir)/calllistview.cpp $(srcdir)/kphonetimer.cpp $(srcdir)/dspeffect.cpp $(srcdir)/kcallwidget.cpp $(srcdir)/dspfulldiverter.cpp $(srcdir)/callaudio.cpp $(srcdir)/ksipuserinfo.cpp $(srcdir)/ksipregistrations.cpp $(srcdir)/audiocontrol.cpp $(srcdir)/ksippreferences.cpp $(srcdir)/ksipoptions.cpp kphone_meta_unload.cpp   audiocontrol.moc kcallwidget.moc callaudio.moc kphone.moc calllistview.moc ksipuserinfo.moc kphonetimer.moc kphoneview.moc bhistoryline.moc ksipoptions.moc ksipregistrations.moc ksippreferences.moc menulistview.moc 
 	@echo 'creating kphone.all_cpp.cpp ...'; \
 	rm -f kphone.all_cpp.files kphone.all_cpp.final; \
 	echo "#define KDE_USE_FINAL 1" >> kphone.all_cpp.final; \
diff -r -N -u kphone-3.11/kphone/audiocontrol.cpp kphone-3.11-gsm/kphone/audiocontrol.cpp
--- kphone-3.11/kphone/audiocontrol.cpp	Mon May 26 07:39:54 2003
+++ kphone-3.11-gsm/kphone/audiocontrol.cpp	Fri May 23 08:57:40 2003
@@ -192,16 +192,20 @@
 {
 	a = callaudio;
 	QVBox *vbox = makeVBoxMainWidget();
-	KConfig *config = KGlobal::config();
-	config->setGroup( "Video" );
+
 	(void) new QLabel( "Video SW:", vbox );
-	videoSW = new QLineEdit( config->readEntry( "videoSW", "/usr/local/bin/vic" ), vbox );
+	videoSW = new QLineEdit( a->getVideoSW(), vbox );
 	videoSW->setMinimumWidth( fontMetrics().maxWidth() * 20 );
+
 	bg1 = new QHButtonGroup( "Preferred Video Codec", vbox );
 	QRadioButton *h261Button = new QRadioButton( "H261", bg1 );
 	bg1->insert( h261Button, h261 );
 	QRadioButton *h263Button = new QRadioButton( "H263", bg1 );
 	bg1->insert( h263Button, h263 );
+
+	KConfig *config = KGlobal::config();
+	config->setGroup( "Video" );
+	videoSW->setText( config->readEntry( "videoSW", "/usr/local/bin/vic" ) );
 	QString codec = config->readEntry( "codec", "h261" );
 	if( codec == "h261" ) {
 		h261Button->setChecked(TRUE);
@@ -241,6 +245,7 @@
 
 void VideoControl::slotCancel( void )
 {
+	videoSW->setText( a->getOSSFilename() );
 	QDialog::reject();
 }
 
diff -r -N -u kphone-3.11/kphone/callaudio.cpp kphone-3.11-gsm/kphone/callaudio.cpp
--- kphone-3.11/kphone/callaudio.cpp	Mon May 26 07:33:56 2003
+++ kphone-3.11-gsm/kphone/callaudio.cpp	Fri May 23 08:56:47 2003
@@ -201,11 +201,19 @@
 	setOSSFilename( config->readEntry( "oss-filename" ) );
 }
 
+void CallAudio::saveVideoSettings( void )
+{
+	KConfig *config = KGlobal::config();
+	config->setGroup( "Video" );
+	config->writeEntry( "videoSW", getVideoSW() );
+	config->sync();
+}
+
 void CallAudio::readVideoSettings( void )
 {
 	KConfig *config = KGlobal::config();
 	config->setGroup( "Video" );
-	setVideoSW( config->readEntry( "videoSW", "/usr/local/bin/vic"  ) );
+	setVideoSW( config->readEntry( "VideoSW" ) );
 }
 
 void CallAudio::setCurrentCall( SipCall *newcall )
diff -r -N -u kphone-3.11/kphone/callaudio.h kphone-3.11-gsm/kphone/callaudio.h
--- kphone-3.11/kphone/callaudio.h	Mon May 26 07:18:19 2003
+++ kphone-3.11-gsm/kphone/callaudio.h	Thu Apr 17 13:38:00 2003
@@ -42,6 +42,7 @@
 	void saveAudioSettings( void );
 	void readAudioSettings( void );
 
+	void saveVideoSettings( void );
 	void readVideoSettings( void );
 
 	void setNumfrags( int newNumfrags ) { numfrags = newNumfrags; }
diff -r -N -u kphone-3.11/kphone/kphone.h kphone-3.11-gsm/kphone/kphone.h
--- kphone-3.11/kphone/kphone.h	Mon May 26 08:15:25 2003
+++ kphone-3.11-gsm/kphone/kphone.h	Fri May 23 09:31:55 2003
@@ -19,7 +19,7 @@
 class KSipUsers;
 class KTestOptions;
 
-QString const KPhoneVersion = "3.11";
+QString const KPhoneVersion = "3.11-rc2";
 int const quitTime = 5000;
 int const ringTime_1 = 200;
 int const ringTime_2 = 2000;
diff -r -N -u kphone-3.11/kphone/kphoneview.cpp kphone-3.11-gsm/kphone/kphoneview.cpp
--- kphone-3.11/kphone/kphoneview.cpp	Fri May 23 06:00:29 2003
+++ kphone-3.11-gsm/kphone/kphoneview.cpp	Tue Aug  5 18:33:20 2003
@@ -185,6 +185,10 @@
 		}
 		if( !uristr.isEmpty() ) {
 			newcall = new SipCall( user, QString::null, SipCall::outSubscribeCall );
+#ifdef WITH_GSM_AUTH
+			if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+				newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 			newcall->setSubject( uristr );
 			newcall->setContactStr( contact );
 			SipUri remoteuri( uristr );
@@ -243,6 +247,10 @@
 		}
 	}
 	c = new SipCall( user );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		c->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	c->setSubject( user->getUri().uri() );
 	imwidget = new KInstantMessageWidget( c, this );
 	imwList.append( imwidget );
@@ -331,6 +339,10 @@
 							}
 							delete it.current();
 							SipCall *newcall = new SipCall( user, QString::null, SipCall::outSubscribeCall );
+#ifdef WITH_GSM_AUTH
+							if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+								newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 							newcall->setSubject( uristr );
 							SipUri remoteuri( uristr );
 							member = new SipCallMember( newcall, remoteuri );
@@ -387,6 +399,10 @@
 		}
 	}
 	SipCall *initcall = new SipCall( user );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		initcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	initcall->setSubject( uri.uri() );
 	imwidget = new KInstantMessageWidget( initcall, this );
 	imwList.append( imwidget );
@@ -419,6 +435,10 @@
 		}
 	}
 	SipCall *initcall = new SipCall( user );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		initcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	initcall->setSubject( uri.uri() );
 	imwidget = new KInstantMessageWidget( initcall, this );
 	imwList.append( imwidget );
@@ -438,6 +458,10 @@
 		return;
 	}
 	SipCall *newcall = new SipCall( user, QString::null, SipCall::StandardCall );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	newcall->setSubject( user->getUri().uri() );
 	KCallWidget *widget = new KCallWidget( callAudio, newcall, this );
 	cwList.append( widget );
@@ -459,6 +483,10 @@
 		return;
 	}
 	SipCall *newcall = new SipCall( user, QString::null, SipCall::videoCall );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	newcall->setSubject( user->getUri().uri() );
 	KCallWidget *widget = new KCallWidget( callAudio, newcall, this );
 	cwList.append( widget );
@@ -590,6 +618,10 @@
 			}
 			if( !find ) {
 				newcall = new SipCall( user, QString::null, SipCall::outSubscribeCall );
+#ifdef WITH_GSM_AUTH
+				if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+					newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 				newcall->setSubject( uristr );
 				SipUri remoteuri( uristr );
 				member = new SipCallMember( newcall, remoteuri );
@@ -770,6 +802,10 @@
 void KPhoneView::redirectCall( const SipUri &calluri, const QString &subject )
 {
 	SipCall *newcall = new SipCall( user );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	newcall->setSubject( subject );
 	KCallWidget *widget = new KCallWidget( callAudio, newcall, this );
 	cwList.append( widget );
@@ -785,6 +821,10 @@
 		return;
 	}
 	SipCall *newcall = new SipCall( user, QString::null, SipCall::StandardCall );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	QString subject;
 	subject.sprintf( user->getUri().uri() );
 	newcall->setSubject( subject );
@@ -808,6 +848,10 @@
 		return;
 	}
 	SipCall *newcall = new SipCall( user, QString::null, SipCall::videoCall );
+#ifdef WITH_GSM_AUTH
+	if(identitiesDialog != NULL && identitiesDialog->getSipRegister() != NULL)
+		newcall->setGsmAuth(identitiesDialog->getSipRegister()->getGsmAuth());
+#endif
 	QString subject;
 	subject.sprintf( user->getUri().uri() );
 	newcall->setSubject( subject );
diff -r -N -u kphone-3.11/kphone/ksipregistrations.cpp kphone-3.11-gsm/kphone/ksipregistrations.cpp
--- kphone-3.11/kphone/ksipregistrations.cpp	Tue May 20 18:16:10 2003
+++ kphone-3.11-gsm/kphone/ksipregistrations.cpp	Fri Aug  1 21:28:51 2003
@@ -39,6 +39,9 @@
 	(void) new QLabel( "q-value between 0.0-1.0 (optional):", vbox );
 	qValue = new QLineEdit( vbox );
 	autoRegister = new QCheckBox( "Auto Register", vbox );
+#ifdef WITH_GSM_AUTH
+	gsmAuthentication = new QCheckBox( "GSM Authentication", vbox );
+#endif
 	labelRegister = new QLabel( "", vbox );
 	buttonRegister = new QPushButton( "Register", vbox );
 	connect( buttonRegister, SIGNAL( clicked() ), reg, SLOT( changeRegistration() ) );
@@ -158,7 +161,11 @@
 	(void) new QLabel( "Server = " + server, vbox );
 	(void) new QLabel( "Username:", vbox );
 	username = new QLineEdit( vbox );
+#ifdef WITH_GSM_AUTH
+	(void) new QLabel( "Password (SIM PIN when GSM auth):", vbox );
+#else
 	(void) new QLabel( "Password:", vbox );
+#endif
 	password = new QLineEdit( vbox );
 	password->setEchoMode( QLineEdit::Password );
 }
@@ -258,6 +265,16 @@
 			autoRegister = false;
 			sipreg->setAutoRegister( false );
 		}
+#ifdef WITH_GSM_AUTH
+		str = config->readEntry( "GSMAuthentication" );
+		if( str == "Yes" ) {
+			gsmAuthentication = true;
+			sipreg->setGSMAuthentication( true );
+		} else {
+			gsmAuthentication = false;
+			sipreg->setGSMAuthentication( false );
+		}
+#endif
 	} else {
 		editRegistration();
 	}
@@ -286,6 +303,9 @@
 		edit->setSipProxy( sipreg->getOutboundProxy() );
 		edit->setSipProxyUsername( u->getUri().getProxyUsername() );
 		edit->setAutoRegister( autoRegister );
+#ifdef WITH_GSM_AUTH
+		edit->setGSMAuthentication( gsmAuthentication );
+#endif
 		edit->setQvalue( sipreg->getQvalue() );
 	} else {
 		edit->updateState("off");
@@ -328,8 +348,17 @@
 		config->writeEntry( "AutoRegister", "No");
 	}
 
-	s = edit->getSipProxy();
+#ifdef WITH_GSM_AUTH
+	if( edit->getGSMAuthentication() ) {
+		gsmAuthentication = true;
+		config->writeEntry( "GSMAuthentication", "Yes");
+	} else {
+		gsmAuthentication = false;
+		config->writeEntry( "GSMAuthentication", "No");
+	}
+#endif
 
+	s = edit->getSipProxy();
 
 	config->writeEntry( "qValue", edit->getQvalue() );
 	config->sync();
@@ -401,6 +430,14 @@
 		case SipRegister::AuthenticationRequiredWithNewPassword:
 			edit->updateState( "Auth Required..." );
 			break;
+#ifdef WITH_GSM_AUTH
+		case SipRegister::GsmAuthFirstPhase:
+			edit->updateState( "GSM Auth Required..." );
+			break;
+		case SipRegister::GsmAuthSecondPhase:
+			edit->updateState( "GSM-Auth Required..." );
+			break;
+#endif
 		case SipRegister::Connected:
 			edit->updateState( "Active" );
 			break;
@@ -417,7 +454,12 @@
 {
 	setRegisterState();
 	if( sipreg->getRegisterState() != SipRegister::AuthenticationRequired &&
-			sipreg->getRegisterState() != SipRegister::AuthenticationRequiredWithNewPassword ) {
+			sipreg->getRegisterState() != SipRegister::AuthenticationRequiredWithNewPassword
+#ifdef WITH_GSM_AUTH
+			&& sipreg->getRegisterState() != SipRegister::GsmAuthFirstPhase
+			&& sipreg->getRegisterState() != SipRegister::GsmAuthSecondPhase
+#endif
+			) {
 		return;
 	}
 	QString authtype;
@@ -426,25 +468,46 @@
 			authtype = "Digest Authentication Request"; break;
 		case SipRegister::BasicAuthenticationRequired:
 			authtype = "Basic Authentication Request"; break;
+#ifdef WITH_GSM_AUTH
+		case SipRegister::GSMAuthenticationRequired:
+			authtype = "GSM Authentication Request"; break;
+#endif
 		case SipRegister::ProxyDigestAuthenticationRequired:
 			authtype = "Proxy Digest Authentication Request"; break;
 		case SipRegister::ProxyBasicAuthenticationRequired:
 			authtype = "Proxy Basic Authentication Request"; break;
+#ifdef WITH_GSM_AUTH
+		case SipRegister::ProxyGSMAuthenticationRequired:
+			authtype = "Proxy GSM Authentication Request"; break;
+#endif
 	}
 	QString server = sipreg->getServerUri().proxyUri();
 	QString sipuri = u->getUri().uri();
-	KSipAuthenticationRequest authreq( server, sipuri, userPrefix + authtype );
 	QString username = sipreg->getRegisterCall()->getProxyUsername();
+	KSipAuthenticationRequest authreq( server, sipuri, userPrefix + authtype );
 	authreq.setUsername( username );
 	QString password = sipreg->getRegisterCall()->getPassword();
 	if( password.isEmpty() || sipreg->getRegisterState() == SipRegister::AuthenticationRequiredWithNewPassword ) {
 		if( authreq.exec() ) {
-			if( authreq.getUsername().isEmpty() || authreq.getUsername().isEmpty() ) {
+			if( authreq.getPassword().isEmpty() || authreq.getUsername().isEmpty() ) {
+#ifdef WITH_GSM_AUTH
+				QMessageBox::information( parent, "Identity", "Try to access the GSM SIM without PIN!" );
+#else
 				return;
+#endif
 			}
 			sipreg->getRegisterCall()->setProxyUsername( authreq.getUsername() );
 			sipreg->getRegisterCall()->setPassword( authreq.getPassword() );
 			sipreg->requestRegister( authreq.getUsername(), authreq.getPassword() );
+#ifdef WITH_GSM_AUTH
+			if(sipreg->getGsmAuth()->getError()==GA_ERR_WRONG_PIN
+				|| sipreg->getGsmAuth()->getError()==GA_ERR_NO_PIN)
+			{
+				authreq.setPassword( QString("") );
+				sipreg->getRegisterCall()->setPassword( QString("") );
+				QMessageBox::information( parent, "Identity", "Wrong SIM PIN provided!\n (You must to restart KPhone)" );
+			}
+#endif
 		}
 	} else {
 		sipreg->requestRegister( username, password );
diff -r -N -u kphone-3.11/kphone/ksipregistrations.h kphone-3.11-gsm/kphone/ksipregistrations.h
--- kphone-3.11/kphone/ksipregistrations.h	Tue Apr 15 12:41:32 2003
+++ kphone-3.11-gsm/kphone/ksipregistrations.h	Tue Aug  5 15:30:49 2003
@@ -1,3 +1,5 @@
+#include <config.h>
+
 #ifndef KSIPREGISTRATIONS_H_INCLUDED
 #define KSIPREGISTRATIONS_H_INCLUDED
 
@@ -23,6 +25,10 @@
 	void updateState( QString state );
 	void setAutoRegister( bool newAutoRegister ) { autoRegister->setChecked( newAutoRegister ); }
 	bool getAutoRegister( void ) { return autoRegister->isChecked(); }
+#ifdef WITH_GSM_AUTH
+	void setGSMAuthentication( bool newGSMAuth ) { gsmAuthentication->setChecked( newGSMAuth ); }
+	bool getGSMAuthentication( void ) { return gsmAuthentication->isChecked(); }
+#endif
 	QString getFullname( void ) const;
 	QString getUsername( void ) const;
 	QString getHostname( void ) const;
@@ -53,6 +59,9 @@
 	QLineEdit *sipProxyUsername;
 	QLineEdit *qValue;
 	QCheckBox *autoRegister;
+#ifdef WITH_GSM_AUTH
+	QCheckBox *gsmAuthentication;
+#endif
 	QLabel *labelRegister;
 	QPushButton *buttonRegister;
 	bool editMode;
@@ -85,6 +94,9 @@
 	void unregAllRegistration( void );
 	bool getUseStun( void ) { return useStun; }
 	QString getStunSrv( void ) { return stunSrv; }
+#ifdef WITH_GSM_AUTH
+	SipRegister *getSipRegister() { return sipreg; }
+#endif
 
 private slots:
 	void changeRegistration( void );
@@ -102,6 +114,9 @@
 	SipUser *u;
 	SipRegister *sipreg;
 	bool autoRegister;
+#ifdef WITH_GSM_AUTH
+	bool gsmAuthentication;
+#endif
 	int expires;
 	QWidget *parent;
 	bool useStun;
diff -r -N -u kphone-3.11/kphone-3.11.kdevprj kphone-3.11-gsm/kphone-3.11.kdevprj
--- kphone-3.11/kphone-3.11.kdevprj	Thu Jan  1 01:00:00 1970
+++ kphone-3.11-gsm/kphone-3.11.kdevprj	Fri Aug  1 20:12:43 2003
@@ -0,0 +1,1454 @@
+[./CHANGES]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./COPYING]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./INSTALL]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./Makefile.am]
+files=./COPYING,./configure,./config.h.in,./configure.in,./configure.files,./configure.in.in,./install-sh,./acinclude.m4,./missing,./mkinstalldirs,./stamp-h.in,./subdirs,./aclocal.m4,./config.h.bot,./CHANGES,./INSTALL,./README,./user_guide.pdf,./vic-install.sh,./vic-kphone.tgz,./vic-compile.sh,./vic-clean.sh,./kphone-3.11.kdevprj,
+sub_dirs=admin,kphone,dissipate2,ilbc,doc,kphonegsm,
+type=normal
+
+[./README]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./acinclude.m4]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./aclocal.m4]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./config.h.bot]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./config.h.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./configure]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./configure.files]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./configure.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./configure.in.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./install-sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./kphone-3.11.kdevprj]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./missing]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./mkinstalldirs]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./stamp-h.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./subdirs]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./user_guide.pdf]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./vic-clean.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./vic-compile.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./vic-install.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[./vic-kphone.tgz]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[Config for BinMakefileAm]
+addcxxflags=
+bin_program=kphone-3.11
+cxxflags=
+ldadd=
+ldflags=
+
+[General]
+AMChanged=false
+author=dcm
+email=dcm@gorn.fokus.fraunhofer.de
+kdevprj_version=1.3
+lfv_open_groups=
+makefiles=./Makefile.am,kphonegsm/Makefile.am,doc/Makefile.am,ilbc/Makefile.am,dissipate2/Makefile.am,kphone/Makefile.am,admin/Makefile.am,
+project_name=kphone-3.11
+project_type=normal_empty
+sub_dir=
+version=
+version_control=CVS
+workspace=1
+
+[LFV Groups]
+Desktop=*.desktop,
+GNU=AUTHORS,COPYING,ChangeLog,INSTALL,README,TODO,NEWS,
+Headers=*.h,*.hxx,*.hpp,*.H,
+Others=*,
+Sources=*.cpp,*.c,*.cc,*.C,*.cxx,*.ec,*.ecpp,*.lxx,*.l++,*.ll,*.l,
+Translations=*.ts,*.po,
+User Interface=*.ui,*.kdevdlg,*.rc,
+groups=Headers,Sources,GNU,Translations,User Interface,Desktop,Others
+
+[Makefile.am]
+sub_dirs=dissipate2
+
+[admin/Makefile.am]
+files=admin/acinclude.m4.in,admin/am_edit,admin/ltcf-c.sh,admin/conf.change.pl,admin/config.guess,admin/config.pl,admin/config.sub,admin/configure.in.min,admin/install-sh,admin/libtool.m4.in,admin/ltcf-cxx.sh,admin/ltconfig,admin/ltmain.sh,admin/mkinstalldirs,admin/missing,
+sub_dirs=
+type=normal
+
+[admin/acinclude.m4.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/am_edit]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/conf.change.pl]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/config.guess]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/config.pl]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/config.sub]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/configure.in.min]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/install-sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/libtool.m4.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/ltcf-c.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/ltcf-cxx.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/ltconfig]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/ltmain.sh]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/missing]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[admin/mkinstalldirs]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[dissipate2/Makefile.am]
+files=dissipate2/base64.c,dissipate2/base64.h,dissipate2/configure.in.in,dissipate2/extern_md5.c,dissipate2/extern_md5.h,dissipate2/generaluri.cpp,dissipate2/generaluri.h,dissipate2/headerparser.cpp,dissipate2/headerparser.h,dissipate2/messagesocket.cpp,dissipate2/messagesocket.h,dissipate2/mimecontenttype.cpp,dissipate2/mimecontenttype.h,dissipate2/parameterlist.cpp,dissipate2/parameterlist.h,dissipate2/sdp.cpp,dissipate2/sdp.h,dissipate2/sipcall.cpp,dissipate2/sipcall.h,dissipate2/sipclient.cpp,dissipate2/sipclient.h,dissipate2/sipheader.cpp,dissipate2/sipheader.h,dissipate2/sipmessage.cpp,dissipate2/sipmessage.h,dissipate2/sipprotocol.cpp,dissipate2/sipprotocol.h,dissipate2/sipregister.cpp,dissipate2/sipregister.h,dissipate2/sipstatus.cpp,dissipate2/sipstatus.h,dissipate2/siptransaction.cpp,dissipate2/siptransaction.h,dissipate2/sipuri.cpp,dissipate2/sipuri.h,dissipate2/sipurilist.cpp,dissipate2/sipurilist.h,dissipate2/sipuser.cpp,dissipate2/sipuser.h,dissipate2/siputil.cpp,dissipate2/siputil.h,dissipate2/sipvia.cpp,dissipate2/sipvia.h,dissipate2/sipvialist.cpp,dissipate2/sipvialist.h,dissipate2/tcpmessagesocket.cpp,dissipate2/tcpmessagesocket.h,dissipate2/udpmessagesocket.cpp,dissipate2/udpmessagesocket.h,dissipate2/gsmauth.h,dissipate2/gsmauth.cpp
+sub_dirs=
+type=static_library
+
+[dissipate2/base64.c]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/base64.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/configure.in.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[dissipate2/extern_md5.c]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/extern_md5.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/generaluri.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/generaluri.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/gsmauth.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/gsmauth.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/headerparser.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/headerparser.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/messagesocket.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/messagesocket.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/mimecontenttype.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/mimecontenttype.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/parameterlist.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/parameterlist.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sdp.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sdp.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipcall.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipcall.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipclient.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipclient.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipheader.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipheader.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipmessage.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipmessage.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipprotocol.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipprotocol.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipregister.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipregister.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipstatus.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipstatus.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/siptransaction.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/siptransaction.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipuri.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipuri.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipurilist.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipurilist.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipuser.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipuser.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/siputil.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/siputil.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipvia.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipvia.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/sipvialist.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/sipvialist.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/tcpmessagesocket.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/tcpmessagesocket.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[dissipate2/udpmessagesocket.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[dissipate2/udpmessagesocket.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[doc/Makefile.am]
+files=doc/dissipate.png,doc/seq-subscribe-out.png,doc/seq-subscribe-in.png,doc/seq-register.png,doc/seq-invite.png,doc/kphone.png,
+sub_dirs=
+type=normal
+
+[doc/dissipate.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[doc/kphone.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[doc/seq-invite.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[doc/seq-register.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[doc/seq-subscribe-in.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[doc/seq-subscribe-out.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[ilbc/FrameClassify.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/FrameClassify.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/LPCdecode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/LPCdecode.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/LPCencode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/LPCencode.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/Makefile.am]
+files=ilbc/hpOutput.cpp,ilbc/iLBC_encode.h,ilbc/iLBC_decode.cpp,ilbc/iLBC_decode.h,ilbc/iCBSearch.cpp,ilbc/iLBC_define.h,ilbc/constants.h,ilbc/createCB.cpp,ilbc/anaFilter.h,ilbc/doCPLC.cpp,ilbc/createCB.h,ilbc/enhancer.cpp,ilbc/doCPLC.h,ilbc/lsf.cpp,ilbc/enhancer.h,ilbc/filter.cpp,ilbc/filter.h,ilbc/FrameClassify.h,ilbc/gainquant.cpp,ilbc/gainquant.h,ilbc/getCBvec.cpp,ilbc/getCBvec.h,ilbc/helpfun.cpp,ilbc/helpfun.h,ilbc/hpInput.cpp,ilbc/hpInput.h,ilbc/packing.cpp,ilbc/hpOutput.h,ilbc/iCBConstruct.h,ilbc/iCBSearch.h,ilbc/LPCdecode.h,ilbc/LPCencode.h,ilbc/lsf.h,ilbc/packing.h,ilbc/StateConstructW.h,ilbc/LPCencode.cpp,ilbc/StateSearchW.h,ilbc/LPCdecode.cpp,ilbc/syntFilter.h,ilbc/anaFilter.cpp,ilbc/constants.cpp,ilbc/FrameClassify.cpp,ilbc/syntFilter.cpp,ilbc/StateSearchW.cpp,ilbc/StateConstructW.cpp,ilbc/iLBC_test.cpp,ilbc/iLBC_encode.cpp,ilbc/iCBConstruct.cpp,
+sub_dirs=
+type=normal
+
+[ilbc/StateConstructW.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/StateConstructW.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/StateSearchW.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/StateSearchW.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/anaFilter.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/anaFilter.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/constants.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/constants.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/createCB.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/createCB.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/doCPLC.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/doCPLC.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/enhancer.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/enhancer.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/filter.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/filter.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/gainquant.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/gainquant.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/getCBvec.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/getCBvec.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/helpfun.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/helpfun.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/hpInput.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/hpInput.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/hpOutput.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/hpOutput.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iCBConstruct.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/iCBConstruct.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iCBSearch.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/iCBSearch.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iLBC_decode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/iLBC_decode.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iLBC_define.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iLBC_encode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/iLBC_encode.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/iLBC_test.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/lsf.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/lsf.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/packing.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/packing.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[ilbc/syntFilter.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[ilbc/syntFilter.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/Makefile.am]
+files=kphone/audiobuffer.cpp,kphone/audiobuffer.h,kphone/audiocontrol.cpp,kphone/audiocontrol.h,kphone/bhistoryline.cpp,kphone/bhistoryline.h,kphone/callaudio.cpp,kphone/callaudio.h,kphone/calllistview.cpp,kphone/calllistview.h,kphone/configure.in.in,kphone/defines.h,kphone/dspaction.cpp,kphone/dspaction.h,kphone/dspcontrol.cpp,kphone/dspcontrol.h,kphone/dspdiverter.cpp,kphone/dspdiverter.h,kphone/dspeffect.cpp,kphone/dspeffect.h,kphone/dspout.cpp,kphone/dspout.h,kphone/dspoutoss.cpp,kphone/dspoutoss.h,kphone/dspoutrtp.cpp,kphone/dspoutrtp.h,kphone/g711.cpp,kphone/g711.h,kphone/kcallwidget.cpp,kphone/kcallwidget.h,kphone/kphone.cpp,kphone/kphone.desktop,kphone/kphone.h,kphone/kphonetimer.cpp,kphone/kphonetimer.h,kphone/kphoneview.cpp,kphone/kphoneview.h,kphone/ksipoptions.cpp,kphone/ksipoptions.h,kphone/ksippreferences.cpp,kphone/ksippreferences.h,kphone/ksipregistrations.cpp,kphone/ksipregistrations.h,kphone/ksipuserinfo.cpp,kphone/ksipuserinfo.h,kphone/large-kphone.png,kphone/lo-kphone.png,kphone/main.cpp,kphone/menulistview.cpp,kphone/menulistview.h,kphone/mini-kphone.png,kphone/rtpdataheader.h,kphone/thread.cpp,kphone/thread.h,kphone/dspfulldiverter.cpp,kphone/dspfulldiverter.h,kphone/offline.png,kphone/hangup.png,kphone/online.png,kphone/dial.png,kphone/enter.png,kphone/phonebook.png,kphone/videocall.png,
+sub_dirs=
+type=normal
+
+[kphone/audiobuffer.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/audiobuffer.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/audiocontrol.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/audiocontrol.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/bhistoryline.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/bhistoryline.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/callaudio.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/callaudio.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/calllistview.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/calllistview.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/configure.in.in]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/defines.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dial.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/dspaction.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspaction.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspcontrol.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspcontrol.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspdiverter.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspdiverter.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspeffect.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspeffect.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspfulldiverter.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspfulldiverter.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspout.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspout.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspoutoss.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspoutoss.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/dspoutrtp.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/dspoutrtp.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/enter.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/g711.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/g711.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/hangup.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/kcallwidget.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/kcallwidget.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/kphone.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/kphone.desktop]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/kphone.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/kphonetimer.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/kphonetimer.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/kphoneview.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/kphoneview.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/ksipoptions.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/ksipoptions.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/ksippreferences.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/ksippreferences.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/ksipregistrations.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/ksipregistrations.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/ksipuserinfo.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/ksipuserinfo.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/large-kphone.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/lo-kphone.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/main.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/menulistview.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/menulistview.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/mini-kphone.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/offline.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/online.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/phonebook.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphone/rtpdataheader.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/thread.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphone/thread.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphone/videocall.png]
+dist=true
+install=false
+install_location=
+type=DATA
+
+[kphonegsm/Makefile.am]
+files=kphonegsm/code.cpp,kphonegsm/decode.cpp,kphonegsm/gsm_create.cpp,kphonegsm/gsm_decode.cpp,kphonegsm/gsm_encode.cpp,kphonegsm/gsm_explode.cpp,kphonegsm/gsm_implode.cpp,kphonegsm/gsm_option.cpp,kphonegsm/gsm_print.cpp,kphonegsm/long_term.cpp,kphonegsm/lpc.cpp,kphonegsm/preprocess.cpp,kphonegsm/rpe.cpp,kphonegsm/short_term.cpp,kphonegsm/table.cpp,kphonegsm/toast_audio.cpp,kphonegsm/config.h,kphonegsm/gsm.h,kphonegsm/private.h,kphonegsm/proto.h,kphonegsm/unproto.h,kphonegsm/add.cpp,kphonegsm/debug.cpp,kphonegsm/gsm_destroy.cpp,kphonegsm/toast_alaw.cpp,
+sub_dirs=
+type=normal
+
+[kphonegsm/add.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/code.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/config.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphonegsm/debug.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/decode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphonegsm/gsm_create.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_decode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_destroy.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_encode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_explode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_implode.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_option.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/gsm_print.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/long_term.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/lpc.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/preprocess.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/private.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphonegsm/proto.h]
+dist=true
+install=false
+install_location=
+type=HEADER
+
+[kphonegsm/rpe.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/short_term.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/table.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/toast_alaw.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/toast_audio.cpp]
+dist=true
+install=false
+install_location=
+type=SOURCE
+
+[kphonegsm/unproto.h]
+dist=true
+install=false
+install_location=
+type=HEADER
diff -r -N -u kphone-3.11/kphone-3.11.kdevses kphone-3.11-gsm/kphone-3.11.kdevses
--- kphone-3.11/kphone-3.11.kdevses	Thu Jan  1 01:00:00 1970
+++ kphone-3.11-gsm/kphone-3.11.kdevses	Fri Aug  1 20:12:43 2003
@@ -0,0 +1,22 @@
+<?xml version = '1.0' encoding = 'UTF-8'?>
+<!DOCTYPE KDevPrjSession>
+<KDevPrjSession>
+<LastCompileConfig>(Default)</LastCompileConfig>
+ <Mainframe MaximizeMode="1" />
+ <DocsAndViews NumberOfDocuments="8" >
+<Doc0 CursorPosLine="399" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="53" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/gsmauth.cpp" >
+<View0 Top="24" Width="400" Attach="1" Height="300" Left="3" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc0>
+  <Doc1 CursorPosLine="0" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="0" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/gsmauth.h" >
+<View0 Top="46" Width="1121" Attach="1" Height="715" Left="25" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc1>
+  <Doc2 CursorPosLine="392" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="0" FileName="/home/dcm/work/smartcard/kphone-3.11/kphone/ksipregistrations.cpp" >
+<View0 Top="68" Width="1121" Attach="1" Height="715" Left="47" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc2>
+  <Doc3 CursorPosLine="2" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="0" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/sipregister.h" >
+<View0 Top="90" Width="1121" Attach="1" Height="699" Left="69" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc3>
+  <Doc4 CursorPosLine="15" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="6" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/sipregister.cpp" >
+<View0 Top="112" Width="1121" Attach="1" Height="699" Left="91" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc4>
+  <Doc5 CursorPosLine="2" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="0" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/sipprotocol.h" >
+<View0 Top="110" Width="1127" Attach="1" Height="726" Left="110" Focus="1" Type="KWriteView" MinMaxMode="2" />  </Doc5>
+  <Doc6 CursorPosLine="310" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="10" FileName="/home/dcm/work/smartcard/kphone-3.11/dissipate2/sipprotocol.cpp" >
+<View0 Top="156" Width="1121" Attach="1" Height="699" Left="135" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc6>
+  <Doc7 CursorPosLine="45" Type="KWriteDoc" NumberOfViews="1" CursorPosCol="63" FileName="/home/dcm/work/smartcard/kphone-3.11/kphone/ksipregistrations.h" >
+<View0 Top="178" Width="1121" Attach="1" Height="699" Left="157" Focus="0" Type="KWriteView" MinMaxMode="0" />  </Doc7> </DocsAndViews></KDevPrjSession>
\ No newline at end of file
diff -r -N -u kphone-3.11/kphonegsm/Makefile.in kphone-3.11-gsm/kphonegsm/Makefile.in
--- kphone-3.11/kphonegsm/Makefile.in	Wed Jan 22 10:50:53 2003
+++ kphone-3.11-gsm/kphonegsm/Makefile.in	Mon Aug  4 20:54:09 2003
@@ -103,6 +103,7 @@
 LIBJPEG = @LIBJPEG@
 LIBMICO = @LIBMICO@
 LIBOBJS = @LIBOBJS@
+LIBPCSCLITE = @LIBPCSCLITE@
 LIBPNG = @LIBPNG@
 LIBPTHREAD = @LIBPTHREAD@
 LIBPYTHON = @LIBPYTHON@
@@ -146,6 +147,8 @@
 PAMINC = @PAMINC@
 PAMLIBPATHS = @PAMLIBPATHS@
 PAMLIBS = @PAMLIBS@
+PCSCLITE_INCLUDES = @PCSCLITE_INCLUDES@
+PCSCLITE_LDFLAGS = @PCSCLITE_LDFLAGS@
 PYTHONINC = @PYTHONINC@
 PYTHONLIB = @PYTHONLIB@
 PYTHONMODDIR = @PYTHONMODDIR@
@@ -211,7 +214,7 @@
 myincludedir = $(includedir)/kphonegsm
 myinclude_HEADERS = config.h gsm.h private.h proto.h unproto.h
 
-DISTCLEANFILES = $(libgsm_la_METASOURCES)
+DISTCLEANFILES = $(libkphonegsm_la_METASOURCES)
 
 SRCDOC_DEST = $(kde_htmldir)/en/kphonegsm
 mkinstalldirs = $(SHELL) $(top_srcdir)/admin/mkinstalldirs
@@ -381,14 +384,14 @@
 
 distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
 
-subdir = gsm
+subdir = kphonegsm
 
 distdir: $(DISTFILES)
 	here=`cd $(top_builddir) && pwd`; \
 	top_distdir=`cd $(top_distdir) && pwd`; \
 	distdir=`cd $(distdir) && pwd`; \
 	cd $(top_srcdir) \
-	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu gsm/Makefile
+	  && $(AUTOMAKE) --include-deps --build-dir=$$here --srcdir-name=$(top_srcdir) --output-dir=$$top_distdir --gnu kphonegsm/Makefile
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
