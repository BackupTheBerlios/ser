<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" 
   "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<section id="options" xmlns:xi="http://www.w3.org/2001/XInclude">
    <sectioninfo>
	<authorgroup>
	    <author>
		<firstname>Nils</firstname>
		<surname>Ohlmeier</surname>
		<affiliation><orgname>iptelorg GmbH</orgname></affiliation>
		<address>
		    <email>nils@iptel.org</email>
		</address>
	    </author>
	</authorgroup>
	<copyright>
	    <year>2006</year>
	    <holder>iptelorg GmbH</holder>
	</copyright>
	<revhistory>
	    <revision>
		<revnumber>$Revision: 1.1 $</revnumber>
		<date>$Date: 2006/02/05 19:00:40 $</date>
	    </revision>
	</revhistory>
    </sectioninfo>

    <title>Sanity Module</title>

    <section id="sanity.overview">
	<title>Overview</title>
	<para>
		This module aims to implement several sanity checks on incoming
		requests which are suggested or even required by a RFC, but are
		not available yet in the core of SER.
	</para>
	<para>
		This checks are not required by SER itself for its functionality.
		But on the other side it makes not much sence if a broken
		request traverses through a SIP network if it is rejected sooner
		or later by SIP device any way. As every sanity cost extra
		performance because of additional parsing and evaluation it
		is now with this module up to the SER adminstrator which checks
		should be done on which requests.
	</para>
	<para>
		The following checks are available:
		<itemizedlist>
		<listitem>
			<para>
			ruri sip version - checks if the SIP version in the request
			URI is supported, currently only 2.0.
			</para>
		</listitem>
		<listitem>
			<para>
			ruri scheme - not working because parser fails already on
			unknown URI schemes.
			</para>
		</listitem>
		<listitem>
			<para>
			required headers - checks if the minimum set of required headers
			to, from, cseq, callid and via is present in the request.
			</para>
		</listitem>
		<listitem>
			<para>
			via sip version - not working because parser fails already 
			when another version then 2.0 is present.
			</para>
		</listitem>
		<listitem>
			<para>
			via protocol - not working because parser fails already if an
			unsupported transport is present.
			</para>
		</listitem>
		<listitem>
			<para>
			cseq method - checks if the method from the cseq header is equal
			to the request method.
			</para>
		</listitem>
		<listitem>
			<para>
			cseq value - checks if the number in the cseq header is a valid
			unsigend integer.
			</para>
		</listitem>
		<listitem>
			<para>
			content length - checks if the size of the body matches with the
			value from the content length header.
			</para>
		</listitem>
		<listitem>
			<para>
			expires value - checks if the value of the expires header is a
			valid unsigned integer.
			</para>
		</listitem>
		<listitem>
			<para>
			proxy require - checks if all items of the proxy require header
			are present in the list of the extensions from the module 
			parameter proxy_require.
			</para>
		</listitem>
		</itemizedlist>
	</para>
    </section>
    
    <section id="sanity.dep">
	<title>Dependencies</title>
	<para>
	    The following modules must be loaded before this module:
	    <itemizedlist>
		<listitem>
		    <para>
			<emphasis>sl</emphasis> - Stateless replies.
		    </para>
		</listitem>
	    </itemizedlist>
	</para>
    </section>

    <xi:include href="params.xml"/>
    <xi:include href="functions.xml"/>
</section>
