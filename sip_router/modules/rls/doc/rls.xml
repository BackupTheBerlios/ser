<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" 
   "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<section id="pres_rls"><title>RLS module (Resource Lists Server)</title>

<para>Resource lists server is a server which allows subscriptions to lists of
users. Its behaviour is defined in <xref linkend="pres_draft_rls"/> and
<xref linkend="pres_draft_rls_sip"/>. As described there, it uses XCAP server
for storing data about lists of users. These data can be manipulated in any way
by user's client software.
</para>

<!-- standard incompliances -->
<section><title>Standard incompatibility</title>
<para>There is a few of standard incompliances:
<itemizedlist>
	<listitem><para><emphasis>only internal subscriptions</emphasis> - at
	this moment are supported only internal subscriptions to PA module. Module
	can not handle subscriptions to external presence servers.</para></listitem>
</itemizedlist>
</para>
</section>

<!-- DB storage -->
<section><title>Persistence (not done yet!)</title>
<para></para>
</section>

<include xmlns="http://www.w3.org/2001/XInclude" href="params.xml"/>
<include xmlns="http://www.w3.org/2001/XInclude" href="functions.xml"/>

<section id="rls.dependencies"><title>Dependencies</title>
<itemizedlist><title>Modules</title>
	<listitem><para><application>tm</application></para></listitem>
	<listitem><para><application>pa</application></para></listitem>
<!--	<listitem><para><application>dialog</application></para></listitem> 
	<listitem><para><application>usrloc</application></para></listitem>
	<listitem><para>optionaly database module
	(<application>mysql</application>, ...)</para></listitem>-->
</itemizedlist>
<itemizedlist><title>Libraries</title>
		<listitem><para><application>libcds (internal)</application></para></listitem>
		<listitem><para><application>libxcap (internal)</application> - XCAP queries</para></listitem>
		<listitem><para><application>libpresence (internal)</application> - used for
		internal subscriptions ta PA</para></listitem>
</itemizedlist>
</section>

<section><title>TODO</title>
<para>
<itemizedlist>
	<listitem><para>storing subscriptions into db and reloading on startup (in
	subscription_manager)</para></listitem>

	<listitem><para>XCAP authorization</para></listitem>
	<listitem><para>DB authorization (presence rules like in XCAP stored in
	local DB)</para></listitem>
	<listitem><para>separate authorization settings (type, server) for each XCAP
	server</para></listitem>
	<listitem><para>combination of XCAP and implicit authorization (no XCAP
	rules, try implicit)</para></listitem>
	
	<listitem><para>reaction on failed NOTIFY (408, ...) as soon as will be
	corrected <varname>req_within</varname></para></listitem>
	<listitem><para>remote subscriptions (SIP events client)</para></listitem>
	<listitem><para>BUG: long run (kphone) => stops process resubscriptions so
	they start to be processed by PA</para></listitem>
	<listitem><para>pending subscriptions should return 202 on SUBSCRIBE instead of
	200 (but 202 kills eyeBeam!)</para></listitem>	
</itemizedlist>
</para>
</section>


</section>

