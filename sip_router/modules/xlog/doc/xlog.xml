<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN" 
   "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">

<section id="xlog" xmlns:xi="http://www.w3.org/2001/XInclude">
    <sectioninfo>
	<authorgroup>
	    <author>
		<firstname>Elena-Ramona</firstname>
		<surname>Modroiu</surname>
		<affiliation><orgname>Voice Sistem</orgname></affiliation>
		<address>
		<email>ramona@voice-system.ro</email>
		<otheraddr>
		<ulink url="http://www.voice-system.ro">http://www.voice-system.ro</ulink>
		</otheraddr>
		</address>
	    </author>
	</authorgroup>
	<copyright>
	    <year>2003</year>
	    <holder>FhG FOKUS</holder>
	</copyright>
	<revhistory>
	    <revision>
		<revnumber>$Revision: 1.3 $</revnumber>
		<date>$Date: 2005/08/24 22:26:21 $</date>
	    </revision>
	</revhistory>

    </sectioninfo>

    <title>Xlog Module</title>

    <section id="xlog.overview">
	<title>Overview</title>
	<para>
	    This module provides the possibility to print user formatted log or
	    debug messages from SER scripts, similar to printf function but now
	    a specifier is replaced with a part of the SIP request. <xref
	    linkend="implemented_specifiers"/> shows what can be printed out.
	</para>
    </section>

    <section id="implemented_specifiers">
	<title>Implemented Specifiers</title>
	<itemizedlist>
	    <listitem>
		<para>
		    %% : '%'
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %br : request's first branch
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %bR : request's all branches
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ci : call-id
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %cs : cseq
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ct : contact header
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %Cxy : color printing based on escape sequences (x - foreground
			color, y - background color). The values for colors: x - default
			color of the terminal; s - Black; r - Red; g - Green; y - Yellow;
			b - Blue; p - Purple; c - Cyan; w - White 
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ds : destination set
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %fu : 'From' uri
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ft : 'From' tag
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %mb : whole SIP message buffer
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %mf : flags set for current SIP request
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %mi : SIP message id
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ml : SIP message length
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %pp : process id (pid)
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %rm : request's method
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ru : request's r-uri
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %rr : reply's reason
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %rs : reply's status
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %rt : 'Refer-To' uri
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %Ri : IP address of the interface where the request
		    has been received
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %Rp : received port
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %si : IP source address 
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %sp : source port
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %tu : 'To' uri
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %tt : 'To' tag
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %Ts : unix time stamp
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %Tf : string formatted time
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %ua : User agent header field
		</para>
	    </listitem>
	    <listitem>
		<para>
		    %{name[N]} : print the body of the Nth header identified by
		    'name'. If [N] is omitted then the body of the first header
		    is printed. The first header is got when N=0, for the
		    second N=1, a.s.o. To print the last header of that type,
		    use -1, no other negative values are supported now. No
		    white spaces are allowed inside the specifier (before },
		    before or after {, [, ] symbols). When N='*', all headers
		    of that type are printed.
		</para>
		<para>
		    The module should identify most of compact header names
		    (the ones recognized by ser which should be all at this
		    moment), if not, the compact form has to be specified
		    explicitely. It is recommended to use dedicated specifiers
		    for headers (e.g., %ua for user agent header), if they are
		    available -- they are faster.
		</para>
	    </listitem>
	</itemizedlist>
    </section>

    <xi:include href="params.xml"/>
    <xi:include href="functions.xml"/>

</section>
